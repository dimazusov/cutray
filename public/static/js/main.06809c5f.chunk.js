(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{104:function(e,t,a){e.exports=a(179)},114:function(e,t,a){},115:function(e,t,a){},116:function(e,t,a){},179:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(24),s=a.n(i),o=(a(109),a(12)),c=a(10),l=a(38),u=(a(114),a(115),a(116),a(4)),d=a(5),p=a(8),h=a(6),m=a(2),g=a(7),f=a(44),b=a.n(f),v={get:function(e,t,a){this._query("get",e,t,a)},add:function(e,t,a){this._query("add",e,t,a)},update:function(e,t,a){this._query("update",e,t,a)},delete:function(e,t,a){this._query("delete",e,t,a)},_query:function(e,t,a,n){var r={};void 0!=a.token&&(r["X-AUTH-TOKEN"]=a.token,delete a.token);var i="get"==e?"get":"post",s=this._buildUrl(e,t,a),o={};if("post"==i)for(var c in o=new URLSearchParams,a)a[c].forEach(function(e){var t=Object.keys(e);"object"==typeof e[t[0]]?e[t[0]].map(function(a,n){Object.keys(a).map(function(a){var r=c+"["+t[0]+"]["+n+"]["+a+"]";o.append(r,e[t[0]][n][a])})}):o.append(c+"["+t[0]+"]",e[t[0]])});b()({method:i,url:s,data:o,headers:r}).then(function(e){n(e.data)}).catch(function(e){console.log("error"),console.log(e)})},_buildGetParams:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a="";for(var n in e)"object"===typeof e[n]?a+=""==t?this._buildGetParams(e[n],n):this._buildGetParams(e[n],t+"["+n+"]"):a+=t+"["+n+"]="+e[n]+"&";return""==t&&(a=a.substring(0,a.length-1)),a},_buildUrl:function(e,t,a){var n="http://localhost/_api/"+t+"/"+e;return"get"==e&&(n+="?"+this._buildGetParams(a)),n},getMessages:function(e){return e.messages},isSuccess:function(e){return"success"==e.status}},E=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement("h1",null,"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430")}}]),t}(r.a.Component),O=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this;return 0==this.props.items.length?"":r.a.createElement("div",{className:"navigation"},r.a.createElement("div",{className:"navigation__header"},this.props.navigationName,":"),this.props.items.map(function(t,a){var n="";return void 0!=t.isActive&&t.isActive&&(n+="navigation__link_active"),r.a.createElement("div",{className:"navigation__link",key:a},r.a.createElement(c.b,{to:t.link,className:n,onClick:e.props.onLinkClick},t.name))}))}}]),t}(r.a.Component),k=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){if(this.props.imgPaths){var e=this.props.imgPaths.split(","),t="http://"+window.location.hostname+"/img/product/"+e[0];return r.a.createElement("img",{className:this.props.className,src:t,alt:""})}return this.props.defaultImage?r.a.createElement("img",{className:this.props.className,src:this.props.defaultImage,alt:""}):r.a.createElement("div",null,"\u041d\u0435\u0442 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f")}}]),t}(r.a.Component),C=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).getFavouriteClassNames=a.getFavouriteClassNames.bind(Object(m.a)(a)),a.getBasketClassNames=a.getBasketClassNames.bind(Object(m.a)(a)),a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"getLink",value:function(){return"/product/"+this.props.vendor+"_"+this.props.id}},{key:"getFavouriteClassNames",value:function(){var e="item__favourite";return this.props.isFavourite&&(e+=" item__favourite_selected"),e}},{key:"getBasketClassNames",value:function(){var e="item__basket";return this.props.isInCart&&(e+=" item__basket_selected"),e}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"item list__item"},r.a.createElement("div",{className:"list__item-im-block"},r.a.createElement(c.b,{className:"list__item-im-link",to:this.getLink()},r.a.createElement(k,{className:"item__preview-img",imgPaths:this.props.imgPaths,defaultImage:"/img/item2v1.jpg"}))),r.a.createElement("div",{className:"item__name"},r.a.createElement(c.b,{to:this.getLink()},this.props.name)),r.a.createElement("div",{className:"item__price"},this.props.price," \u0440."),r.a.createElement("div",{className:this.getFavouriteClassNames(),onClick:function(){e.props.onFavouriteClick(e.props.id)}}),r.a.createElement("div",{className:this.getBasketClassNames(),onClick:function(){e.props.onBasketClick(e.props.id)}}))}}]),t}(r.a.Component),_=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(d.a)(t,[{key:"updateSearchValue",value:function(){this.props.updateSearchValue("")}},{key:"render",value:function(){var e=this;return r.a.createElement("nav",{"aria-label":"breadcrumb"},r.a.createElement("ol",{className:"breadcrumb"},this.props.values.map(function(t,a){return r.a.createElement("li",{key:a,className:"breadcrumb-item active","aria-current":"page"},r.a.createElement(c.b,{to:t.link,onClick:e.props.onLinkClick},t.name))})))}}]),t}(r.a.Component),y=function(){function e(t){var a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Object(u.a)(this,e);var n=[];[0,1,2,3].map(function(e){var a="sub"+e;t[a]&&n.push(t[a])}),this.isNeedCheckChain=a,this.seonamesFromUrl=n,this.chainCategories=[],this.mainCategory={id:"0",name:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f",seoname:"",link:"/",cleft:0,cright:1e5}}return Object(d.a)(e,[{key:"getChain",value:function(e){var t=this;if(0!=this.seonamesFromUrl.length){var a=this.seonamesFromUrl[this.seonamesFromUrl.length-1];v.get("category",{category:{seoname:a}},function(n){0!=n.data.results.length?(t.chainCategories.push(n.data.results[0]),t.loadBreadCrumbs(n.data.results[0].parent_id,e)):e([{error:"Such category"+a+" not found"}],[])})}else e([],[this.mainCategory])}},{key:"loadBreadCrumbs",value:function(e,t){var a=this;if(0==e){if(this.chainCategories=this.chainCategories.reverse(),!this.checkChain()&&this.isNeedCheckChain)return void t([{error:"Such category not found"}],[]);var n="";return this.chainCategories.map(function(e){n+="/"+e.seoname,e.link=n}),this.chainCategories.unshift(this.mainCategory),void t([],this.chainCategories)}v.get("category",{category:{id:e}},function(e){0!=e.data.results.length?(a.chainCategories.push(e.data.results[0]),a.loadBreadCrumbs(e.data.results[0].parent_id,t)):t([{error:"Such category not found"}],[])})}},{key:"checkChain",value:function(){for(var e=0;e<this.seonamesFromUrl.length;e++)if(this.seonamesFromUrl[e]!=this.chainCategories[e].seoname)return!1;return!0}}]),e}(),j=a(42),S=a.n(j),N=a(20),T=a(182),P=a(183),I=a(184),R=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).changePageTo=a.changePageTo.bind(Object(m.a)(a)),a.getPrevLinkToPage=a.getPrevLinkToPage.bind(Object(m.a)(a)),a.getNextLinkToPage=a.getNextLinkToPage.bind(Object(m.a)(a)),a.getLinkToPage=a.getLinkToPage.bind(Object(m.a)(a)),a.state={showCount:3,countOnPage:a.props.countOnPage,totalCount:a.props.totalCount,activePage:a.props.activePage,beforeActivePage:2,afterActivePage:2},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"changePageTo",value:function(e){this.props.changePageTo(e)}},{key:"getPrevLinkToPage",value:function(e){var t=e-1;return t<1?this.getLinkToPage(1):this.getLinkToPage(t)}},{key:"getNextLinkToPage",value:function(e){var t=e+1;return t>this.props.countPages?this.getLinkToPage(this.props.countPages):this.getLinkToPage(t)}},{key:"getLinkToPage",value:function(e){var t=this.props.location.search.substring(1,this.props.location.search.length).split("&"),a=this.props.location.pathname+"?page="+e,n=t.filter(function(e){return"page"!=e.split("=")[0]});return n[0]?a+"&"+n.join("&"):a}},{key:"render",value:function(){var e=this;if(0==this.props.totalCount)return"";var t=this.props.activePage-this.state.beforeActivePage;t<1&&(t=1);var a=this.props.activePage+this.state.afterActivePage;a>this.props.countPages&&(a=this.props.countPages);for(var n=[],i=this.props.activePage,s=function(t){n.push(r.a.createElement(T.a,{key:"page"+t},r.a.createElement(c.b,{to:e.getLinkToPage(t),onClick:function(a){return e.changePageTo(t)}},r.a.createElement(P.a,null,t))))},o=t;o<this.props.activePage;o++)s(o);n.push(r.a.createElement(T.a,{key:"activePage",active:!0},r.a.createElement(c.b,{to:this.getLinkToPage(i),onClick:function(t){return e.changePageTo(i)}},r.a.createElement(P.a,null,i))));for(var l=function(t){n.push(r.a.createElement(T.a,{key:"page"+t},r.a.createElement(c.b,{to:e.getLinkToPage(t),onClick:function(a){return e.changePageTo(t)}},r.a.createElement(P.a,null,t))))},u=this.props.activePage+1;u<=a;u++)l(u);var d=this.props.countPages;return r.a.createElement(N.a,null,r.a.createElement(I.a,{"aria-label":"Page navigation example"},r.a.createElement(T.a,null,r.a.createElement(c.b,{to:this.getLinkToPage(1),onClick:function(t){return e.changePageTo(1)}},"<<")),n.map(function(e){return e}),r.a.createElement(T.a,null,r.a.createElement(c.b,{to:this.getLinkToPage(d),onClick:function(t){return e.changePageTo(d)}},">>"))))}}]),t}(r.a.Component),A=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.countOnPage?this.props.countOnPage:10,t=Math.ceil(this.props.totalCount/e);return r.a.createElement(N.a,null,this.props.children,r.a.createElement(R,{location:this.props.location,totalCount:this.props.totalCount,changePageTo:this.props.changePageTo,activePage:this.props.activePage,countPages:t,countOnPage:e}))}}]),t}(r.a.Component),w=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={isNotFound:!1,breadCrumbsParts:[],seonamesFromUrl:[],chainSeonames:[],page:a.getActivePage(a.props.location)},a.changePageTo=a.changePageTo.bind(Object(m.a)(a)),a.loadProducts=a.loadProducts.bind(Object(m.a)(a)),a.loadCategories=a.loadCategories.bind(Object(m.a)(a)),a.getActivePage=a.getActivePage.bind(Object(m.a)(a)),a.getMenu=a.getMenu.bind(Object(m.a)(a)),a.getProducts=a.getProducts.bind(Object(m.a)(a)),a.isInCart=a.isInCart.bind(Object(m.a)(a)),a.isFavourite=a.isFavourite.bind(Object(m.a)(a)),a.onBasketClick=a.onBasketClick.bind(Object(m.a)(a)),a.onFavouriteClick=a.onFavouriteClick.bind(Object(m.a)(a)),a.init(),a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"init",value:function(){var e=this;new y(this.props.match.params).getChain(function(t,a){if(0==t.length){var n=a[a.length-1];e.props.updateBreadCrumbs(a),e.props.updateCurrentCategory(n);var r={category:{cleft:n.cleft,cright:n.cright}};v.get("category",r,function(t){var a=[n.id];t.data.results.map(function(e){a.push(e.id)});var r=Object.assign(n,{childIds:a});e.props.updateCurrentCategory(r),e.loadProducts()}),e.loadCategories(n.id)}else e.setState(Object.assign(e.state,{isNotFound:!0}))})}},{key:"loadCategories",value:function(e){var t=this;v.get("category",{category:{parent_id:e}},function(e){if(0!=e.data.results.length){var a=e.data.results,n="/"==t.props.location.pathname?"":t.props.location.pathname;a.map(function(e){e.link=n+"/"+e.seoname}),t.props.updateCategories(e.data.results)}else t.props.updateCategories([])})}},{key:"loadProducts",value:function(){var e=this,t={product:{category_ids:this.props.currentCategory.childIds,page:this.state.page}};this.props.searchValue&&(t.product.name=this.props.searchValue),v.get("product",t,function(t){e.props.updateData(t.data)})}},{key:"getActivePage",value:function(e){var t=S.a.parse(e.search);return void 0!=t.page?parseInt(t.page):1}},{key:"changePageTo",value:function(e){this.setState(Object.assign(this.state,{page:e})),this.loadProducts()}},{key:"componentDidUpdate",value:function(e,t,a){this.props.isSearch&&(this.loadProducts(),this.props.updateIsSearch(!1)),e.location.pathname!=this.props.location.pathname&&(this.setState(Object.assign(this.state,{page:1})),this.init())}},{key:"onBasketClick",value:function(e){this.isInCart(e)?this.props.deleteProductFromCart(e):this.props.addProductToCart(e),this.forceUpdate()}},{key:"onFavouriteClick",value:function(e){this.isFavourite(e)?this.props.deleteProductFromFavourite(e):this.props.addProductToFavourite(e),this.forceUpdate()}},{key:"isFavourite",value:function(e){return!!this.props.favourites.filter(function(t){return e==t.id}).length}},{key:"isInCart",value:function(e){var t=!!this.props.productsInCart.filter(function(t){return e==t.id}).length;return t}},{key:"getMenu",value:function(){var e=this;return r.a.createElement("div",{className:"catalog__menu"},r.a.createElement(O,{navigationName:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438",items:this.props.categories,onLinkClick:function(){e.props.updateSearchValue("")}}))}},{key:"getProducts",value:function(){var e=this;return 0==this.props.products.length?r.a.createElement("div",{className:"catalog__items text-left"},r.a.createElement("h2",null,"\u041f\u043e \u0412\u0430\u0448\u0435\u043c\u0443 \u0437\u0430\u043f\u0440\u043e\u0441\u0443 \u0442\u043e\u0432\u0430\u0440\u044b \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u044b")):r.a.createElement("div",{className:"catalog__items"},r.a.createElement(A,{location:this.props.location,changePageTo:this.changePageTo,totalCount:this.props.totalCount,activePage:this.state.page},this.props.products.map(function(t,a){return r.a.createElement(C,{key:a,id:t.id,name:t.name,vendor:t.vendor,price:t.price,imgPaths:t.img_paths,isInCart:e.isInCart(t.id),isFavourite:e.isFavourite(t.id),onBasketClick:e.onBasketClick,onFavouriteClick:e.onFavouriteClick})})))}},{key:"render",value:function(){var e=this;return this.state.isNotFound?r.a.createElement(E,null):r.a.createElement("div",{className:"wrapper wrapper__border-top wrapper__padding-footer"},r.a.createElement(_,{values:this.props.breadCrumbs,onLinkClick:function(){e.props.updateSearchValue("")}}),r.a.createElement("div",{className:"catalog"},this.getMenu(),this.getProducts()))}}]),t}(n.Component),D=Object(o.b)(function(e){return{searchValue:e.header.searchValue,isSearch:e.header.isSearch,favourites:e.favourite.products,productsInCart:e.cart.products,source:e.list.source,isNeedSearch:e.list.isNeedSearch,products:e.list.data,totalCount:e.list.totalCount,currentCategory:e.list.currentCategory,breadCrumbs:e.list.breadCrumbs,categories:e.list.categories}},function(e){return{updateData:function(t){e({type:"LIST_UPDATE_DATA",data:t})},updateBreadCrumbs:function(t){e({type:"LIST_UPDATE_BEADCRUMBS",data:{breadCrumbs:t}})},updateCategories:function(t){e({type:"LIST_UPDATE_CATEGORIES",data:{categories:t}})},updateCurrentCategory:function(t){e({type:"LIST_UPDATE_CURRENT_CATEGORY",data:{currentCategory:t}})},updateIsSearch:function(t){e({type:"HEADER_UPDATE_IS_SEARCH",data:{isSearch:t}})},addProductToCart:function(t){e({type:"CART_ADD_PRODUCT",data:{id:t}})},deleteProductFromCart:function(t){e({type:"CART_DELETE_PRODUCT",data:{id:t}})},addProductToFavourite:function(t){e({type:"FAVOURITE_ADD_PRODUCT",data:{id:t}})},deleteProductFromFavourite:function(t){e({type:"FAVOURITE_DELETE_PRODUCT",data:{id:t}})},updateSearchValue:function(t){e({type:"HEADER_UPDATE_SEARCH_VALUE",data:{searchValue:t}})}}})(w),F=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement(N.a,null,r.a.createElement("h4",{className:"p-3"},"\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c \u0432 \u043f\u0430\u043d\u0435\u043b\u044c \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f."),r.a.createElement("ul",null,r.a.createElement("li",{className:"p-2"},r.a.createElement("a",{href:"/backoffice/product"},"\u0422\u043e\u0432\u0430\u0440\u044b")),r.a.createElement("li",{className:"p-2"},r.a.createElement("a",{href:"/backoffice/category"},"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438")),r.a.createElement("li",{className:"p-2"},r.a.createElement("a",{href:"/backoffice/order"},"\u0417\u0430\u043a\u0430\u0437\u044b"))))}}]),t}(n.Component),L=a(22),U=function(){function e(){Object(u.a)(this,e)}return Object(d.a)(e,[{key:"check",value:function(e,t){return!!e.filter(function(e){return-1!=t.indexOf(e)}).length}}]),e}(),B=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(d.a)(t,[{key:"getPage",value:function(){var e=S.a.parse(this.props.location.search),t=void 0!=e.page?e.page:1;return parseInt(t)}},{key:"getList",value:function(e,t){e.token=this.props.token,v.get(this.props.source,e,t)}},{key:"onSave",value:function(e,t,a){t.token=this.props.token,v.add(e,t,a)}},{key:"getSource",value:function(){return this.props.source}},{key:"checkAccess",value:function(e){return(new U).check(["ROLE_ADMIN"],e)}}]),t}(r.a.Component),M=a(185),x=a(89),W=a(23),G=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).moveToCreate=a.moveToCreate.bind(Object(m.a)(a)),a.getListHeader=a.getListHeader.bind(Object(m.a)(a)),a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"getListHeader",value:function(){return r.a.createElement(M.a,null,r.a.createElement(x.a,null,r.a.createElement("h2",{className:"m-2"},this.props.label)),r.a.createElement(x.a,null,r.a.createElement(W.a,{className:"m-2 float-right",onClick:this.moveToCreate},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c")))}},{key:"moveToCreate",value:function(){window.location=this.props.location.pathname+"/add"}}]),t}(B),H=a(13),V=(a(81),a(90)),q=a.n(V),J=a(45),Y=a.n(J),K=function(e){function t(e){var a;Object(u.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).changePageTo=a.changePageTo.bind(Object(m.a)(a)),a.getCountPages=a.getCountPages.bind(Object(m.a)(a)),a.getEditLink=a.getEditLink.bind(Object(m.a)(a)),a.getTableBody=a.getTableBody.bind(Object(m.a)(a));return a.state={countOnPage:10,countPages:Math.ceil(a.props.totalCount/10),totalCount:a.props.totalCount,activePage:a.props.activePage},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"getCountPages",value:function(){return Math.ceil(this.props.totalCount/this.state.countOnPage)}},{key:"getEditLink",value:function(e){return this.props.location.pathname+"/edit/"+e}},{key:"onDelete",value:function(e){var t=this,a=this.props.source,n=Object(L.a)({token:this.props.token},this.props.source,[{id:e}]);v.delete(a,n,function(){t.props.updateList(Object(L.a)({},t.props.source,{page:t.props.activePage})),t.setState(Object.assign(t.state,{countPages:Math.ceil(t.props.totalCount/t.state.countOnPage)})),t.forceUpdate()})}},{key:"updateList",value:function(e){this.props.updateList(e)}},{key:"changePageTo",value:function(e){this.props.updateList(Object(L.a)({},this.props.source,{page:e}))}},{key:"getRenderNotFound",value:function(){return r.a.createElement("div",null,r.a.createElement("hr",null),r.a.createElement("h5",{className:"p-3"},"\u0414\u0430\u043d\u043d\u044b\u0445 \u043d\u0435\u0442"),r.a.createElement("hr",null))}},{key:"getTableHeader",value:function(){return r.a.createElement(H.Thead,null,r.a.createElement(H.Tr,{className:"list-border"},this.props.columns.map(function(e,t){return r.a.createElement(H.Th,{key:t},e.label)}),r.a.createElement(H.Th,null,"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f")))}},{key:"getTableBody",value:function(){var e=this,t=this.props.data,a=this.props.columns;return r.a.createElement(H.Tbody,null,t.map(function(t,n){return r.a.createElement(H.Tr,{className:"list-border",key:n},a.map(function(e,a){return"image"==e.type?r.a.createElement(H.Td,{key:a},r.a.createElement(k,{imgPaths:t.img_paths,className:"images-list"})):r.a.createElement(H.Td,{key:a},t[e.name])}),r.a.createElement(H.Td,{align:"left"},r.a.createElement("a",{href:e.getEditLink(t.id)},r.a.createElement(W.a,{variant:"link"},r.a.createElement(q.a,{key:"beer"}))),r.a.createElement(W.a,{onClick:function(){e.onDelete(t.id)},variant:"link"},r.a.createElement(Y.a,{key:"beer"}))))}))}},{key:"render",value:function(){var e=this.props.data;return e&&e.length?r.a.createElement(N.a,null,r.a.createElement(H.Table,null,this.getTableHeader(),this.getTableBody()),r.a.createElement(R,{location:this.props.location,activePage:this.props.activePage,totalCount:this.props.totalCount,countOnPage:this.state.countOnPage,countPages:this.getCountPages(),changePageTo:this.changePageTo})):this.getRenderNotFound()}}]),t}(r.a.Component),z=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).updateList=a.updateList.bind(Object(m.a)(a)),a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.updateList(Object(L.a)({},this.props.source,{page:this.getPage()}))}},{key:"updateList",value:function(e){var t=this;this.getList(e,function(e){t.props.setProducts(e.data)})}},{key:"render",value:function(){return this.checkAccess(this.props.userRoles)?r.a.createElement(N.a,null,this.getListHeader(),r.a.createElement(K,{token:this.props.token,location:this.props.location,columns:this.props.showedColumns,data:this.props.data,totalCount:this.props.totalCount,activePage:this.getPage(),source:this.props.source,updateList:this.updateList})):r.a.createElement(l.a,{to:"/"})}}]),t}(G),X=Object(o.b)(function(e){return{token:e.profile.token,userRoles:e.profile.userRoles,source:e.product.source,data:e.product.data,label:e.product.label,editFields:e.product.editFields,totalCount:e.product.totalCount,showedColumns:e.product.showedColumns}},function(e){return{setProducts:function(t){e({type:"PRODUCT_SET",data:t})},setPage:function(t){e({type:"PRODUCT_PAGE_SET",page:t})}}})(z),Q=a(37),$=a(19),Z=a(72),ee=a.n(Z),te=a(14),ae=a(186),ne=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).onChange=a.onChange.bind(Object(m.a)(a)),a.initCategory=a.initCategory.bind(Object(m.a)(a)),a.getCategory=a.getCategory.bind(Object(m.a)(a)),a.getParentCallback=a.getParentCallback.bind(Object(m.a)(a)),a.removeChildrenBehindFrom=a.removeChildrenBehindFrom.bind(Object(m.a)(a)),a.state={categories:[],isInit:!1,isLoading:!0,afterInit:function(){},initCategoryId:a.props.id},a.initCategory(0),a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentDidUpdate",value:function(e,t,a){var n=this;!this.state.isInit&&this.props.id&&(this.setState(Object.assign(this.state,{isInit:!0})),this.state.isLoading?this.setState(Object.assign(this.state,{afterInit:function(){n.removeChildrenBehindFrom(0),n.initCategory(n.props.id)}})):(this.removeChildrenBehindFrom(0),this.initCategory(this.props.id)))}},{key:"initCategory",value:function(e){var t=this,a=function e(a){var n=a.data;if(n.results.length&&5!=t.state.categories.length){var r=void 0==t.state.selectedId?t.props.id:t.state.selectedId,i=n.results.filter(function(e){return e.id!=t.props.fadeCategoryId});if(t.setState(Object.assign(t.state,{categories:[{childs:i,selectedId:r}].concat(Object(Q.a)(t.state.categories)),selectedId:n.results[0].parent_id,isLoading:!1})),t.state.afterInit&&(t.state.afterInit(),Object.assign(t.state,{afterInit:!1})),0!=n.results[0].parent_id)t.getCategory(n.results[0].parent_id,function(a){var n=a.data;t.getParentCategories(n.results[0].parent_id,e)});else if(!t.props.isLastSelected){var s=Object.assign({},t.state);s.categories[s.categories.length-1].selectedId=0,t.setState(s)}}};if(0==e)return this.getParentCategories(e,a);this.getCategory(e,function(n){n.data.results.length?t.getParentCategories(e,a):t.getParentCategories(0,a)})}},{key:"getParentCallback",value:function(e){var t=this,a=e.data;if(a.results.length){var n=Object.assign({},this.state),r=a.results.filter(function(e){return e.id!=t.props.fadeCategoryId});n.categories[n.categories.length]={childs:r},n.isLoading=!1,this.setState(n)}}},{key:"getParentCategories",value:function(e,t){var a={category:{parent_id:e,countOnPage:100}};v.get("category",a,t)}},{key:"getCategory",value:function(e,t){v.get("category",{category:{id:e}},t)}},{key:"removeChildrenBehindFrom",value:function(e){var t=Object.assign({},this.state);t.categories=t.categories.slice(0,e),this.setState(t)}},{key:"onChange",value:function(e){var t=parseInt(e.target.id),a=Object.assign({},this.state);a.isLoading=!1,a.categories[t].selectedId=parseInt(e.target.value),this.setState(a),this.setState(Object.assign(this.state,{isInit:!0})),this.removeChildrenBehindFrom(t+1),-1!=e.target.value&&0!=e.target.value&&(this.getParentCategories(e.target.value,this.getParentCallback),this.props.onChange(this.props.name,e.target.value))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,this.state.categories.map(function(t,a){return r.a.createElement(ae.a,{key:a,type:"select",value:t.selectedId,name:e.props.name,id:a,className:"mt-2 mb-3",onMouseDown:e.init,onChange:e.onChange},r.a.createElement("option",{key:-1,value:"0"},"\u041d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d\u043e"),t.childs.map(function(e,t){return r.a.createElement("option",{key:t,value:e.id},e.name)}))}))}}]),t}(r.a.Component),re=a(52),ie=a(55),se=a.n(ie),oe=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={page:1,title:a.props.title,source:a.props.source,searchFields:a.props.searchFields,searchedData:[],totalCount:0},a.loadPage(),a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"loadPage",value:function(){var e=this,t={token:this.props.token},a={page:this.state.page};this.state.searchFields.map(function(e){return e.value?a[e.name]=e.value:""}),t[this.state.source]=a,v.get(this.state.source,t,function(t){var a=t.data;e.setState(Object.assign(e.state,{searchedData:a.results,totalCount:a.totalCount}))})}},{key:"updateSearchField",value:function(e,t){var a=Object.assign(this.state.searchFields,{});a.map(function(a){return a.name==e?a.value=t:""}),this.setState(Object.assign(this.state,{searchFields:a})),this.loadPage()}},{key:"changePageTo",value:function(e){this.setState(Object.assign(this.state,{page:e})),this.loadPage()}},{key:"getList",value:function(){var e=this;return r.a.createElement(H.Table,null,r.a.createElement(H.Thead,null,r.a.createElement(H.Tr,null,this.state.searchFields.map(function(e,t){return r.a.createElement(H.Th,{key:t},e.label)}),r.a.createElement(H.Th,{key:"select"}))),r.a.createElement(H.Tbody,null,this.state.searchedData.map(function(t,a){return r.a.createElement(H.Tr,{className:"list-border",key:a},e.state.searchFields.map(function(e,a){return r.a.createElement(H.Td,{key:a},t[e.name])}),r.a.createElement(H.Td,{key:"select"},r.a.createElement(W.a,{variant:"link",onClick:function(){e.props.onSelect(t.id),e.props.toogleWindow()}},r.a.createElement(se.a,null))))})))}},{key:"render",value:function(){var e=this;return r.a.createElement(N.a,null,r.a.createElement(re.a,{size:"lg",show:this.props.isWindowOpen(),onHide:this.props.toogleWindow,"aria-labelledby":"example-modal-sizes-title-lg"},r.a.createElement(re.a.Header,{closeButton:!0},r.a.createElement(re.a.Title,{id:"example-modal-sizes-title-lg"},this.state.title)),r.a.createElement(re.a.Body,null,this.state.searchFields.map(function(t,a){return r.a.createElement(N.a,{key:a,className:"pb-3"},t.label,r.a.createElement(te.a.Control,{key:a,name:t.name,onChange:function(a){e.updateSearchField(t.name,a.target.value)},as:"input"}))}),r.a.createElement("hr",null),this.getList(),r.a.createElement(R,{location:this.props.location,activePage:1,totalCount:this.state.totalCount,countOnPage:10,countPages:Math.ceil(this.state.totalCount/10),changePageTo:function(t){return e.changePageTo(t)}}))))}}]),t}(r.a.Component),ce=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={isSelect:!!a.props.id,isSelectWindowOpen:!1,titleSelectWindow:"\u0412\u044b\u0431\u043e\u0440 \u043a\u043b\u0438\u0435\u043d\u0442\u0430",selectWindowSource:"user",searchFieldsSelectWindow:[{label:"Id",name:"id",value:""},{label:"Email",name:"email",value:""}],user:{id:0,email:""},value:""},a.getUserById=a.getUserById.bind(Object(m.a)(a)),a.isWindowOpen=a.isWindowOpen.bind(Object(m.a)(a)),a.toogleWindow=a.toogleWindow.bind(Object(m.a)(a)),a.onChange=a.onChange.bind(Object(m.a)(a)),a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getUserById(this.props.id)}},{key:"getUserById",value:function(e){var t=this,a={token:this.props.token,user:{id:e}};v.get("user",a,function(e){var a=e.data;a.results.length&&t.setState(Object.assign(t.state,{isSelected:!0,user:{id:a.results[0].id,email:a.results[0].email}}))})}},{key:"toogleWindow",value:function(){this.setState(Object.assign(this.state,{isSelectWindowOpen:!this.state.isSelectWindowOpen}))}},{key:"isWindowOpen",value:function(){return this.state.isSelectWindowOpen}},{key:"onChange",value:function(e){this.props.onChange(this.props.name,e),this.getUserById(e)}},{key:"render",value:function(){return r.a.createElement(N.a,null,r.a.createElement(W.a,{onClick:this.toogleWindow},this.state.user.id?"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c":"\u041d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d\u043e"),r.a.createElement("div",{className:"inline ml-3"},this.state.user.email),r.a.createElement(oe,{token:this.props.token,isWindowOpen:this.isWindowOpen,toogleWindow:this.toogleWindow,location:this.props.location,title:this.state.titleSelectWindow,source:this.state.selectWindowSource,onSelect:this.onChange,searchFields:this.state.searchFieldsSelectWindow}))}}]),t}(r.a.Component),le=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).onChange=a.onChange.bind(Object(m.a)(a)),a.initCategory=a.initCategory.bind(Object(m.a)(a)),a.getCategory=a.getCategory.bind(Object(m.a)(a)),a.getParentCallback=a.getParentCallback.bind(Object(m.a)(a)),a.removeChildrenBehindFrom=a.removeChildrenBehindFrom.bind(Object(m.a)(a)),a.state={categories:[],isInit:!1,isLoading:!0,afterInit:function(){},initCategoryId:a.props.id},a.initCategory(0),a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentDidUpdate",value:function(e,t,a){var n=this;!this.state.isInit&&this.props.id&&(this.setState(Object.assign(this.state,{isInit:!0})),this.state.isLoading?this.setState(Object.assign(this.state,{afterInit:function(){n.removeChildrenBehindFrom(0),n.initCategory(n.props.id)}})):(this.removeChildrenBehindFrom(0),this.initCategory(this.props.id)))}},{key:"initCategory",value:function(e){var t=this,a=function e(a){var n=a.data;if(n.results.length&&5!=t.state.categories.length){var r=t.state.selectedId;n.results.map(function(e){e.id==t.props.id&&(r=t.props.id)});var i=n.results.filter(function(e){return e.id!=t.props.fadeCategoryId});t.setState(Object.assign(t.state,{categories:[{childs:i,selectedId:r}].concat(Object(Q.a)(t.state.categories)),selectedId:n.results[0].parent_id,isLoading:!1})),t.state.afterInit&&(t.state.afterInit(),Object.assign(t.state,{afterInit:!1})),0!=n.results[0].parent_id&&t.getCategory(n.results[0].parent_id,function(a){var n=a.data;t.getParentCategories(n.results[0].parent_id,e)})}};if(0==e)return this.getParentCategories(e,a);this.getCategory(e,function(e){var n=e.data;n.results.length?t.getParentCategories(n.results[0].parent_id,a):t.getParentCategories(0,a)})}},{key:"getParentCallback",value:function(e){var t=this,a=e.data;if(a.results.length){var n=Object.assign({},this.state),r=a.results.filter(function(e){return e.id!=t.props.fadeCategoryId});n.categories[n.categories.length]={childs:r},n.isLoading=!1,this.setState(n)}}},{key:"getParentCategories",value:function(e,t){var a={category:{parent_id:e,countOnPage:100}};v.get("category",a,t)}},{key:"getCategory",value:function(e,t){v.get("category",{category:{id:e}},t)}},{key:"removeChildrenBehindFrom",value:function(e){var t=Object.assign({},this.state);t.categories=t.categories.slice(0,e),this.setState(t)}},{key:"onChange",value:function(e){var t=parseInt(e.target.id),a=Object.assign({},this.state);a.isLoading=!1,a.categories[t].selectedId=parseInt(e.target.value),this.setState(a),this.setState(Object.assign(this.state,{isInit:!0})),this.removeChildrenBehindFrom(t+1),-1!=e.target.value&&0!=e.target.value&&(this.getParentCategories(e.target.value,this.getParentCallback),this.props.onChange(this.props.name,e.target.value))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,this.state.categories.map(function(t,a){return r.a.createElement(ae.a,{key:a,type:"select",value:t.selectedId,name:e.props.name,id:a,className:"mt-2 mb-3",onMouseDown:e.init,onChange:e.onChange},r.a.createElement("option",{key:-1,value:"0"},"\u041d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d\u043e"),t.childs.map(function(e,t){return r.a.createElement("option",{key:t,value:e.id},e.name)}))}))}}]),t}(r.a.Component),ue=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(d.a)(t,[{key:"getTableHeader",value:function(){return this.props.headers?r.a.createElement(H.Thead,null,r.a.createElement(H.Tr,null,this.props.headers.map(function(e,t){return r.a.createElement(H.Th,{key:t},e.label)}))):""}},{key:"getItemContent",value:function(e,t){return"count"==e.type?r.a.createElement("div",null,r.a.createElement("div",{className:"triangle-left",onClick:function(){e.action("reduce",t.id)}}),r.a.createElement("div",{className:"p-3 d-inline-block justify-content-center"},t[e.name]),r.a.createElement("div",{className:"triangle-right",onClick:function(){e.action("increase",t.id)}})):"image"==e.type?r.a.createElement(k,{className:"img-list",imgPaths:t[e.name]}):r.a.createElement("div",null,t[e.name])}},{key:"getLine",value:function(e,t){var a=this;return r.a.createElement(H.Tr,{key:t},this.props.headers.map(function(t,n){return r.a.createElement(H.Td,{key:n},a.getItemContent(t,e))}),r.a.createElement(H.Td,{key:"actions"},this.props.actions.map(function(t,a){if("delete"==t.actionName)return r.a.createElement(W.a,{key:a,onClick:function(){t.action(e.id)},variant:"link"},r.a.createElement(Y.a,{key:"beer"}))})))}},{key:"render",value:function(){var e=this;return r.a.createElement(H.Table,null,this.getTableHeader(),r.a.createElement(H.Tbody,null,this.props.body.map(function(t,a){return e.getLine(t,a)})))}}]),t}(r.a.Component),de=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={isSelectWindowOpen:!1,titleSelectWindow:"\u0412\u044b\u0431\u043e\u0440 \u0442\u043e\u0432\u0430\u0440\u0430",selectWindowSource:"product",searchFieldsSelectWindow:[{label:"Id",name:"id",value:""},{label:"\u0418\u043c\u044f",name:"name",value:""},{label:"A\u0440\u0442\u0438\u043a\u0443\u043b",name:"vendor",value:""}],productHeaders:[{label:"Id",name:"id"},{label:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435",name:"img_paths",type:"image"},{label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",name:"name"},{label:"\u041a\u043e\u043b-\u0432\u043e",name:"count",type:"count",action:a.countAction.bind(Object(m.a)(a))},{label:"\u0426\u0435\u043d\u0430 \u0437\u0430 \u0448\u0442\u0443\u043a\u0443",name:"price"}],productsData:[],productActions:[{actionName:"delete",action:function(e){a.onDelete(e)}}]},a.props.productActions&&(a.state.productActions=a.props.productActions),a.isWindowOpen=a.isWindowOpen.bind(Object(m.a)(a)),a.toogleWindow=a.toogleWindow.bind(Object(m.a)(a)),a.getAppendButton=a.getAppendButton.bind(Object(m.a)(a)),a.onSelect=a.onSelect.bind(Object(m.a)(a)),a.getTotal=a.getTotal.bind(Object(m.a)(a)),a.onChange=a.onChange.bind(Object(m.a)(a)),a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.value&&this.props.value.map(function(t){e.onSelect(t.product_id,t.count)})}},{key:"componentWillUpdate",value:function(e,t,a){if(this.props.value.length!=e.value.length&&this.props.value.length>e.value.length){var n=this.state.productsData.filter(function(t){var a=!1;return e.value.map(function(e){e.id==t.id&&(a=!0)}),a});this.setState(Object($.a)({},this.state,{productsData:n}))}}},{key:"countAction",value:function(e,t){var a=Object.assign(this.state.productsData,{});a.map(function(a){a.id==t&&("increase"==e?a.count++:0!=a.count&&a.count--)}),this.setState(Object($.a)({},this.state,{productsData:a})),this.onChange()}},{key:"onDelete",value:function(e){var t=this.state.productsData.filter(function(t){return t.id!=e});this.setState(Object.assign(this.state,{productsData:t})),this.onChange()}},{key:"isWindowOpen",value:function(){return this.state.isSelectWindowOpen}},{key:"toogleWindow",value:function(){this.setState(Object($.a)({},this.state,{isSelectWindowOpen:!this.state.isSelectWindowOpen}))}},{key:"onSelect",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;for(var n in this.state.productsData)if(this.state.productsData[n].id==e)return;var r={product:{id:e}};v.get("product",r,function(e){var n=e.data;if(!n.results.length)return!1;var r=t.state.productsData.slice(),i=n.results[0];i.count=a,r.push(i),t.setState(Object.assign(t.state,{productsData:r})),t.onChange()})}},{key:"getTotal",value:function(){return this.state.productsData.reduce(function(e,t){return e+t.price*t.count},0)}},{key:"onChange",value:function(){var e=[];this.state.productsData.map(function(t){e.push({id:t.id,count:t.count})}),this.props.onChange(this.props.name,e)}},{key:"getAppendButton",value:function(){return 0==this.props.isShowAppendButton?null:r.a.createElement(W.a,{onClick:this.toogleWindow,className:"mt-3"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u043e\u0432\u0430\u0440")}},{key:"render",value:function(){var e=this.getTotal();return r.a.createElement("div",null,r.a.createElement(ue,{headers:this.state.productHeaders,body:this.state.productsData,actions:this.state.productActions}),r.a.createElement("div",{className:"pl-2 pt-3 text-left"},"\u0412\u0441\u0435\u0433\u043e: ",e," \u0440."),this.getAppendButton(),r.a.createElement(oe,{isWindowOpen:this.isWindowOpen,toogleWindow:this.toogleWindow,location:this.props.location,title:this.state.titleSelectWindow,source:this.state.selectWindowSource,onSelect:this.onSelect,searchFields:this.state.searchFieldsSelectWindow}))}}]),t}(r.a.Component),pe={add:function(e,t){this._query("add",e,t)},delete:function(e,t){this._query("delete",e,t)},getImageToken:function(e,t){this._query("getToken",e,t)},_query:function(e,t,a){var n=new FormData,r=this._getUrl(e),i={"Content-Type":"multipart/form-data"};for(var s in void 0!=t.authRoken&&(i["X-AUTH-TOKEN"]=t.authRoken,delete t.authRoken),console.log("data",t),t)n.append(s,t[s]);b.a.post(r,n,{headers:i}).then(function(e){a(e.data)}).catch(function(e){console.log("error"),console.log(e)})},_getUrl:function(e){return"add"==e?"http://localhost/_api/image/add":"delete"==e?"http://localhost/_api/image/delete":"getToken"==e?"http://localhost/_api/image/get/token":void 0}},he=a(74),me=function(e){function t(e){var a;Object(u.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={images:[],imageToken:"",authToken:a.props.authToken};var n={type:a.props.type};return a.props.id&&(n.id=a.props.id),pe.getImageToken(n,function(e){var t=Object.assign({},a.state);t.imageToken=e.token,t.images=[],e.blobs.map(function(e){t.images.push({source:"data:image/jpeg;base64,"+e})}),a.setState(t),a.props.onInit(e.token)}),a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"onChange",value:function(e){var t=this,a={authToken:this.state.authToken,token:this.state.imageToken,position:e.target.getAttribute("position"),image:e.target.files[0]};pe.add(a,function(e){console.log("onChange",e);var a=Object.assign({},t.state);a.images[e.position]={source:"data:image/jpeg;base64,"+e.blob},t.setState(a)}.bind(this))}},{key:"onAdd",value:function(e){var t=this;if(e.target.files.length){var a=this.state.images.length,n={authToken:this.state.authToken,token:this.state.imageToken,position:a,image:e.target.files[0]};pe.add(n,function(e){var a=Object.assign({},t.state);a.images.push({source:"data:image/jpeg;base64,"+e.blob}),t.setState(a)}.bind(this))}}},{key:"onDelete",value:function(e){var t=this,a={authToken:this.state.authToken,token:this.state.imageToken,position:e};pe.delete(a,function(a){var n=Object($.a)({},t.state);n.images.splice(e,1),t.setState(n)}.bind(this))}},{key:"render",value:function(){var e=this;return r.a.createElement(N.a,null,this.state.images.map(function(t,a){return r.a.createElement("div",{key:a,className:"images-outblock"},r.a.createElement("div",{className:"images-innerblock"},r.a.createElement(Y.a,{className:"images-icon-remove",key:"beer",onClick:function(){e.onDelete(a)}}),r.a.createElement("img",{className:"images-imageblock",src:t.source}),r.a.createElement("input",{className:"images-input",position:a,onChange:e.onChange.bind(e),type:"file"})))}),r.a.createElement(he.If,{condition:this.state.images.length<10},r.a.createElement(he.Then,null,r.a.createElement("div",{className:"images-outblock"},r.a.createElement("div",{className:"images-innerblock"},r.a.createElement(se.a,{className:"images-addblock"}),r.a.createElement("input",{className:"images-input",onChange:this.onAdd.bind(this),type:"file"}))))))}}]),t}(r.a.Component),ge=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={fields:a.props.fields,isInit:!1,isEdit:!!a.props.isEdit,isShowSuccess:!1,isShowError:!1},void 0!=a.props.onInit&&a.props.onInit(function(e){a.setState(Object($.a)({},a.state,{fields:e,isInit:!0}))}.bind(Object(m.a)(a))),a.onSave=a.onSave.bind(Object(m.a)(a)),a.onChange=a.onChange.bind(Object(m.a)(a)),a.onImageInit=a.onImageInit.bind(Object(m.a)(a)),a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"onSave",value:function(){var e=this;this.props.onSave(this.state.fields,function(t){var a=void 0!=t,n=void 0==t;e.setState(Object($.a)({},e.state,{isShowSuccess:a,isShowError:n})),setInterval(function(){e.setState(Object($.a)({},e.state,{isShowSuccess:!1,isShowError:!1}))},3e3)})}},{key:"onChange",value:function(e,t){var a=Object(Q.a)(this.state.fields);a.map(function(a){a.name==e&&(a.value=t)}),this.props.onChange(a),this.forceUpdate()}},{key:"onImageInit",value:function(e){var t=this;setTimeout(function(){t.onChange("image_hash",e)},3e3)}},{key:"render",value:function(){var e=this,t=parseInt(this.props.id);return this.state.fields.length?r.a.createElement(N.a,null,r.a.createElement(te.a,null,this.state.fields.map(function(a,n){if(e.state.isEdit&&!a.value)return r.a.createElement("div",{key:n},"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430");var i,s=a.type;return i="imageProduct"==s?r.a.createElement(me,{id:t,type:"imageProduct",authToken:e.props.token,onInit:e.onImageInit}):"category"==s?r.a.createElement(le,{id:a.value,name:a.name,onChange:e.onChange}):"userSelect"==s?r.a.createElement(ce,{id:a.value,token:e.props.token,name:a.name,onChange:e.onChange,location:e.props.location}):"order"==s?r.a.createElement(de,{id:a.value,value:a.value,name:a.name,onChange:e.onChange,location:e.props.location}):"parentCategory"==s?r.a.createElement(ne,{id:a.value,isInit:e.state.isInit,isLastSelected:!0,name:a.name,onChange:e.onChange}):"textarea"==s?r.a.createElement(te.a.Control,{value:a.value,name:a.name,type:a.label,onChange:function(t){e.onChange(a.name,t.target.value)},as:"textarea",rows:"3"}):r.a.createElement(te.a.Control,{value:a.value,name:a.name,type:a.label,onChange:function(t){e.onChange(a.name,t.target.value)}}),r.a.createElement(te.a.Group,{className:"text-left",key:n},r.a.createElement(te.a.Label,{className:"pb-2"},a.label),i)}),r.a.createElement(W.a,{onClick:this.onSave,variant:"outline-success"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),r.a.createElement(ee.a,{show:this.state.isShowSuccess,text:"\u0414\u0430\u043d\u043d\u044b\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b",onConfirm:function(){},timer:3e3,confirmButtonColor:"#28a745"}),r.a.createElement(ee.a,{show:this.state.isShowError,text:"\u041e\u0448\u0438\u0431\u043a\u0430, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0437\u0436\u0435",onConfirm:function(){},timer:3e3,confirmButtonColor:"#b33e59"}))):r.a.createElement("div",null,"\u0414\u0430\u043d\u043d\u044b\u0445 \u043d\u0435\u0442")}}]),t}(r.a.Component),fe=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).getId=a.getId.bind(Object(m.a)(a)),a.onSave=a.onSave.bind(Object(m.a)(a)),a.onEdit=a.onEdit.bind(Object(m.a)(a)),a.initEdit=a.initEdit.bind(Object(m.a)(a)),a.onChangeFields=a.onChangeFields.bind(Object(m.a)(a)),a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"getId",value:function(){return this.props.match.params.id}},{key:"onChangeFields",value:function(e){console.log("onChangeFields fields",e),this.props.changeFields(Object.assign({},e))}},{key:"onSave",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=Object(L.a)({token:this.props.token},this.props.source,[]);e.forEach(function(e){n[t.props.source].push(Object(L.a)({},e.name,e.value))}),v.add(this.props.source,n,a)}},{key:"onEdit",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};console.log("fields",e);var n=Object(L.a)({token:this.props.token},this.props.source,[]),r=this.props.match.params.id;n[this.props.source].push({id:r}),e.forEach(function(e){n[t.props.source].push(Object(L.a)({},e.name,e.value))}),v.update(this.props.source,n,a)}},{key:"initEdit",value:function(){var e=this,t=this.props.match.params.id,a=this.props.changeFields;this.getList(Object(L.a)({},this.props.source,{id:t}),function(t){var n=t.data.results[0],r=Object.assign(e.props.editFields,{});for(var i in r)r[i].value=n[r[i].name];e.forceUpdate(),a(r)})}}]),t}(B),be=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return console.log("this.props.token",this.props.token),this.checkAccess(this.props.userRoles)?r.a.createElement("div",null,r.a.createElement(N.a,{className:"pt-2 pb-3 text-left"},r.a.createElement(c.b,{to:"/backoffice/"+this.getSource()},"\u041d\u0430\u0437\u0430\u0434")),r.a.createElement(ge,{id:this.getId(),token:this.props.token,fields:this.props.editFields,onChange:this.onChangeFields,onSave:this.onSave})):r.a.createElement(l.a,{to:"/"})}}]),t}(fe),ve=Object(o.b)(function(e){return{token:e.profile.token,userRoles:e.profile.userRoles,source:e.product.source,editFields:e.product.editFields}},function(e){return{changeFields:function(t){e({type:"PRODUCT_FIELDS_CHANGE",data:t})}}})(be),Ee=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentWillMount",value:function(){this.initEdit()}},{key:"render",value:function(){return this.checkAccess(this.props.userRoles)?r.a.createElement("div",null,r.a.createElement(N.a,{className:"pt-2 pb-3 text-left"},r.a.createElement(c.b,{to:"/backoffice/"+this.getSource()},"\u041d\u0430\u0437\u0430\u0434")),r.a.createElement(ge,{id:this.getId(),token:this.props.token,fields:this.props.editFields,onChange:this.onChangeFields,onSave:this.onEdit,location:this.props.location,source:this.props.source})):r.a.createElement(l.a,{to:"/"})}}]),t}(fe),Oe=Object(o.b)(function(e){return{token:e.profile.token,userRoles:e.profile.userRoles,source:e.product.source,editFields:e.product.editFields}},function(e){return{changeFields:function(t){e({type:"PRODUCT_FIELDS_CHANGE",data:t})}}})(Ee),ke=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).updateList=a.updateList.bind(Object(m.a)(a)),a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.updateList(Object(L.a)({},this.props.source,{page:this.getPage()}))}},{key:"updateList",value:function(e){var t=this;this.getList(e,function(e){t.props.setCategories(e.data)})}},{key:"render",value:function(){return this.checkAccess(this.props.userRoles)?r.a.createElement(N.a,null,this.getListHeader(),r.a.createElement(K,{token:this.props.token,location:this.props.location,columns:this.props.showedColumns,data:this.props.data,totalCount:this.props.totalCount,activePage:this.getPage(),source:this.props.source,updateList:this.updateList})):r.a.createElement(l.a,{to:"/"})}}]),t}(G),Ce=Object(o.b)(function(e){return{token:e.profile.token,userRoles:e.profile.userRoles,source:e.category.source,data:e.category.data,label:e.category.label,editFields:e.category.editFields,totalCount:e.category.totalCount,showedColumns:e.category.showedColumns}},function(e){return{setCategories:function(t){e({type:"CATEGORY_SET",data:t})},setPage:function(t){e({type:"CATEGORY_PAGE_SET",page:t})}}})(ke),_e=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return this.checkAccess(this.props.userRoles)?r.a.createElement("div",null,r.a.createElement(N.a,{className:"pt-2 pb-3 text-left"},r.a.createElement(c.b,{to:"/backoffice/"+this.getSource()},"\u041d\u0430\u0437\u0430\u0434")),r.a.createElement(ge,{id:this.getId(),token:this.props.token,fields:this.props.editFields,onChange:this.onChangeFields,onSave:this.onSave})):r.a.createElement(l.a,{to:"/"})}}]),t}(fe),ye=Object(o.b)(function(e){return{token:e.profile.token,userRoles:e.profile.userRoles,source:e.category.source,editFields:e.category.editFields}},function(e){return{changeFields:function(t){e({type:"CATEGORY_FIELDS_CHANGE",data:t})}}})(_e),je=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentWillMount",value:function(){this.initEdit()}},{key:"render",value:function(){return this.checkAccess(this.props.userRoles)?r.a.createElement("div",null,r.a.createElement(N.a,{className:"pt-2 pb-3 text-left"},r.a.createElement(c.b,{to:"/backoffice/"+this.getSource()},"\u041d\u0430\u0437\u0430\u0434")),r.a.createElement(ge,{id:this.getId(),token:this.props.token,fields:this.props.editFields,onChange:this.onChangeFields,onSave:this.onEdit})):r.a.createElement(l.a,{to:"/"})}}]),t}(fe),Se=Object(o.b)(function(e){return{token:e.profile.token,userRoles:e.profile.userRoles,source:e.category.source,editFields:e.category.editFields}},function(e){return{changeFields:function(t){e({type:"CATEGORY_FIELDS_CHANGE",data:t})}}})(je),Ne=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).updateList=a.updateList.bind(Object(m.a)(a)),a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.updateList(Object(L.a)({},this.props.source,{page:this.getPage()}))}},{key:"updateList",value:function(e){var t=this;this.getList(e,function(e){t.props.setOrder(e.data)})}},{key:"render",value:function(){return this.checkAccess(this.props.userRoles)?r.a.createElement(N.a,null,this.getListHeader(),r.a.createElement(K,{token:this.props.token,location:this.props.location,columns:this.props.showedColumns,data:this.props.data,totalCount:this.props.totalCount,activePage:this.getPage(),source:this.props.source,updateList:this.updateList})):r.a.createElement(l.a,{to:"/"})}}]),t}(G),Te=Object(o.b)(function(e){return{token:e.profile.token,userRoles:e.profile.userRoles,source:e.order.source,data:e.order.data,label:e.order.label,editFields:e.order.editFields,totalCount:e.order.totalCount,showedColumns:e.order.showedColumns}},function(e){return{setOrder:function(t){e({type:"ORDER_SET",data:t})},setPage:function(t){e({type:"ORDER_PAGE_SET",page:t})}}})(Ne),Pe=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return this.checkAccess(this.props.userRoles)?r.a.createElement("div",null,r.a.createElement(N.a,{className:"pt-2 pb-3 text-left"},r.a.createElement(c.b,{to:"/backoffice/"+this.getSource()},"\u041d\u0430\u0437\u0430\u0434")),r.a.createElement(ge,{id:this.getId(),token:this.props.token,location:this.props.location,fields:this.props.editFields,onChange:this.onChangeFields,onSave:this.onSave})):r.a.createElement(l.a,{to:"/"})}}]),t}(fe),Ie=Object(o.b)(function(e){return{token:e.profile.token,userRoles:e.profile.userRoles,source:e.order.source,editFields:e.order.editFields}},function(e){return{changeFields:function(t){e({type:"ORDER_FIELDS_CHANGE",data:t})}}})(Pe),Re=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentWillMount",value:function(){this.initEdit()}},{key:"render",value:function(){return this.checkAccess(this.props.userRoles)?r.a.createElement("div",null,r.a.createElement(N.a,{className:"pt-2 pb-3 text-left"},r.a.createElement(c.b,{to:"/backoffice/"+this.getSource()},"\u041d\u0430\u0437\u0430\u0434")),r.a.createElement(ge,{id:this.getId(),token:this.props.token,isEdit:!0,location:this.props.location,fields:this.props.editFields,onChange:this.onChangeFields,onSave:this.onEdit})):r.a.createElement(l.a,{to:"/"})}}]),t}(fe),Ae=Object(o.b)(function(e){return{token:e.profile.token,userRoles:e.profile.userRoles,source:e.order.source,editFields:e.order.editFields}},function(e){return{changeFields:function(t){e({type:"ORDER_FIELDS_CHANGE",data:t})}}})(Re),we=a(187),De=a(188),Fe=a(189),Le=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={links:[{to:"/backoffice",label:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"},{to:"/backoffice/product",label:"\u0422\u043e\u0432\u0430\u0440\u044b"},{to:"/backoffice/category",label:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438"},{to:"/backoffice/order",label:"\u0417\u0430\u043a\u0430\u0437\u044b"}]},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(we.a,{color:"green",light:!0,expand:"md"},r.a.createElement(De.a,{navbar:!0},this.state.links.map(function(e,t){return r.a.createElement(Fe.a,{className:"p-2",key:t},r.a.createElement(c.b,{to:e.to},e.label))}))))}}]),t}(r.a.Component),Ue=a(190),Be=function(){return r.a.createElement("div",{className:""},r.a.createElement(Ue.a,null,r.a.createElement(Le,null)),r.a.createElement("hr",{className:"my-1"}))},Me=a(191),xe=a(192),We=function(){return r.a.createElement(Me.a,null,r.a.createElement(xe.a,{className:"mt-5 mb-3"},r.a.createElement(Ue.a,{className:"text-center"},r.a.createElement("img",{className:"mr-3",height:"40px",src:"/img/logo.png",alt:""}),(new Date).getFullYear())))},Ge=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={value:"",isBgOpen:!1},a.onSearch=a.onSearch.bind(Object(m.a)(a)),a.toogleBg=a.toogleBg.bind(Object(m.a)(a)),a.onChange=a.onChange.bind(Object(m.a)(a)),a.getSearchInputBlock=a.getSearchInputBlock.bind(Object(m.a)(a)),a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"toogleBg",value:function(){this.setState(Object($.a)({},this.state,{isBgOpen:!this.state.isBgOpen}))}},{key:"onSearch",value:function(){this.toogleBg(),this.props.onSearch(this.state.value)}},{key:"onChange",value:function(e){this.setState(Object($.a)({},this.state,{value:e.target.value}))}},{key:"getSearchInputBlock",value:function(){if(this.state.isBgOpen)return r.a.createElement("div",{className:"header__mobile-search-block"},r.a.createElement("input",{className:"header__mobile-search-input",onChange:this.onChange}),r.a.createElement("div",{className:"header__mobile-search-button",onClick:this.onSearch}),r.a.createElement("div",{className:"header__mobile-search-bg",onClick:this.toogleBg}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"header__search-mobile"},r.a.createElement("div",{className:"header__search-mobile-link",onClick:this.toogleBg}),this.getSearchInputBlock())}}]),t}(r.a.Component),He=(a(180),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).updateHeader=a.updateHeader.bind(Object(m.a)(a)),a.updateIsSearch=a.updateIsSearch.bind(Object(m.a)(a)),a.onMobileSearch=a.onMobileSearch.bind(Object(m.a)(a)),a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"updateHeader",value:function(e){this.props.updateSearchValue(e.target.value),this.updateIsSearch()}},{key:"updateIsSearch",value:function(){this.props.updateIsSearch(!0)}},{key:"getUserBlock",value:function(){return!!this.props.userId?r.a.createElement("div",{className:"auth-block"},r.a.createElement(c.b,{className:"auth-block__profile-link",to:"/profile"}),r.a.createElement(c.b,{className:"auth-block__profile-logout",to:"/logout"},"\u0432\u044b\u0439\u0442\u0438")):r.a.createElement("div",{className:"auth-block"},r.a.createElement(c.b,{className:"auth-block__auth-link-icon",to:"/auth"}),r.a.createElement(c.b,{className:"auth-block__auth-link",to:"/auth"},"\u0432\u043e\u0439\u0442\u0438"),r.a.createElement("div",{className:"auth-block__delimiter"},"|"),r.a.createElement(c.b,{className:"auth-block__reg-link",to:"/registration"},"\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"))}},{key:"onMobileSearch",value:function(e){this.props.updateSearchValue(e),this.props.updateIsSearch(!0)}},{key:"render",value:function(){var e=this;return r.a.createElement("header",{className:"header"},r.a.createElement("div",{className:"header__mobile-menu"},r.a.createElement("div",{className:"header__mobile-menu-link",onClick:function(){e.props.openMenu()}})),r.a.createElement("div",{className:"logo header__logo"},r.a.createElement(c.b,{to:"/"},r.a.createElement("img",{className:"logo__image header__logo-img",src:"/img/logo.png"}))),r.a.createElement("div",{className:"search header__search"},r.a.createElement("input",{className:"search__input-text header__search-input-text",type:"text",value:this.props.searchValue,onChange:this.updateHeader}),r.a.createElement(c.b,{className:"search__button",onClick:this.updateIsSearch,to:"/"})),r.a.createElement(Ge,{onSearch:this.onMobileSearch}),r.a.createElement("div",{className:"header__cart"},r.a.createElement(c.b,{className:"header__cart-link",to:"/cart"})),r.a.createElement("div",{className:"header__favourite"},r.a.createElement(c.b,{className:"header__favourite-link",to:"/favourite"})),this.getUserBlock())}}]),t}(r.a.Component)),Ve=Object(o.b)(function(e){return{userId:e.profile.currentUserId,searchValue:e.header.searchValue}},function(e){return{updateSearchValue:function(t){e({type:"HEADER_UPDATE_SEARCH_VALUE",data:{searchValue:t}})},updateIsSearch:function(t){e({type:"HEADER_UPDATE_IS_SEARCH",data:{isSearch:t}})},openMenu:function(){e({type:"HEADER_OPEN_MENU",data:{}})}}})(He),qe=function(){return r.a.createElement("footer",{className:"footer"},r.a.createElement("div",{className:"logo footer__logo"},r.a.createElement("img",{className:"logo__image logo__image_min",src:"/img/logo.png"})),r.a.createElement("div",{className:"year footer__year"},(new Date).getFullYear()))},Je=a(42),Ye={register:function(e,t){this.__query("http://localhost/_api/reg",e,t)},auth:function(e,t){this.__query("http://localhost/_api/auth",e,t)},logout:function(e,t){this.__query("http://localhost/_api/logout",e,t)},getInfo:function(e,t){this.__query("http://localhost/_api/user-info",e,t)},__query:function(e,t,a){var n={headers:{"Content-Type":"application/x-www-form-urlencoded"}};void 0!=t.token&&(n.headers["X-AUTH-TOKEN"]=t.token),delete t.token,b.a.post(e,Je.stringify(t),n).then(function(e){a(e)}).catch(function(e){console.log(e)})}},Ke=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={email:"",password:"",errors:[],isRedirectToProfile:!1},a.auth=a.auth.bind(Object(m.a)(a)),a.addErrors=a.addErrors.bind(Object(m.a)(a)),a.onChange=a.onChange.bind(Object(m.a)(a)),a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"addErrors",value:function(e){this.setState(Object.assign(this.state,{errors:this.state.errors.concat(e)}))}},{key:"onChange",value:function(e){var t={errors:[]};t[e.target.name]=e.target.value,this.setState(Object.assign(this.state,t))}},{key:"auth",value:function(e){var t=this;e.preventDefault();var a={email:this.state.email,password:this.state.password};Ye.auth(a,function(e){var a=e.data.messages;if(a){var n=Object.keys(a).reduce(function(e,t){return e.concat(a[t])},[]);t.addErrors(n)}else t.props.updateUserData({user_id:e.data.user_id,userRoles:e.data.roles,token:e.data.token}),t.setState(Object($.a)({},t.state,{isRedirectToProfile:!0}))})}},{key:"render",value:function(){return this.state.isRedirectToProfile?r.a.createElement(l.a,{to:"/profile"}):r.a.createElement("div",{className:"wrapper wrapper__padding-footer wrapper__border-top"},r.a.createElement("div",{className:"wrapper_min"},r.a.createElement("h1",{className:"page-header"},"A\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"),this.state.errors.map(function(e,t){return r.a.createElement("div",{className:"auth__error",key:t},e)}),r.a.createElement("form",null,r.a.createElement("div",{className:"auth__login"},r.a.createElement("input",{className:"input-area",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 email",type:"email",onChange:this.onChange,name:"email",value:this.state.email})),r.a.createElement("div",{className:"auth__password"},r.a.createElement("input",{className:"input-area",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",type:"password",onChange:this.onChange,name:"password",value:this.state.password})),r.a.createElement("div",{className:"auth__submit"},r.a.createElement("input",{className:"button",onClick:this.auth,type:"submit",value:"\u0412\u043e\u0439\u0442\u0438"})))))}}]),t}(n.Component),ze=Object(o.b)(function(e){return{}},function(e){return{updateUserData:function(t){e({type:"UPDATE_PROFILE_USER_DATA",data:t})}}})(Ke),Xe=a(96),Qe=a.n(Xe),$e=a(97),Ze=a.n($e)()(Qe.a),et=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={email:"",name:"",password:"",repeat_password:"",errors:[],isRedirectToProfile:!1},a.registration=a.registration.bind(Object(m.a)(a)),a.addErrors=a.addErrors.bind(Object(m.a)(a)),a.clearData=a.clearData.bind(Object(m.a)(a)),a.onChange=a.onChange.bind(Object(m.a)(a)),a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"addErrors",value:function(e){this.setState(Object.assign(this.state,{errors:this.state.errors.concat(e)}))}},{key:"clearData",value:function(){this.setState(Object.assign(this.state,{email:"",name:"",password:""}))}},{key:"onChange",value:function(e){var t={errors:[]};t[e.target.name]=e.target.value,this.setState(Object.assign(this.state,t))}},{key:"registration",value:function(e){var t=this;if(e.preventDefault(),this.state.password==this.state.repeat_password){var a={email:this.state.email,name:this.state.name,password:this.state.password};Ye.register(a,function(e){var a=e.data.messages;if(a){var n=Object.keys(a).reduce(function(e,t){return e.concat(a[t])},[]);t.addErrors(n)}else Ze.fire("","\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c","success"),t.props.updateUserData({user_id:e.data.user_id,userRoles:e.data.roles,token:e.data.token}),setTimeout(function(){t.setState(Object($.a)({},t.state,{isRedirectToProfile:!0}))},2e3)})}else this.addErrors(["\u041f\u0430\u0440\u043e\u043b\u0438 \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442"])}},{key:"render",value:function(){return this.state.isRedirectToProfile?r.a.createElement(l.a,{to:"/profile"}):r.a.createElement("div",{className:"wrapper wrapper__padding-footer wrapper__border-top"},r.a.createElement("div",{className:"wrapper_min"},r.a.createElement("h1",{className:"page-header"},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"),this.state.errors.map(function(e,t){return r.a.createElement("div",{className:"registration__error",key:t},e)}),r.a.createElement("form",null,r.a.createElement("div",{className:"registration__input"},r.a.createElement("input",{className:"input-area",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 email",type:"email",onChange:this.onChange,name:"email",value:this.state.email})),r.a.createElement("div",{className:"registration__input"},r.a.createElement("input",{className:"input-area",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0418\u043c\u044f",type:"text",onChange:this.onChange,name:"name",value:this.state.name})),r.a.createElement("div",{className:"registration__input"},r.a.createElement("input",{className:"input-area",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",type:"password",onChange:this.onChange,name:"password",value:this.state.password})),r.a.createElement("div",{className:"registration__input"},r.a.createElement("input",{className:"input-area",placeholder:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",type:"password",onChange:this.onChange,name:"repeat_password",value:this.state.repeat_password})),r.a.createElement("div",{className:"registration__submit"},r.a.createElement("input",{className:"button",type:"submit",onClick:this.registration,value:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})))))}}]),t}(n.Component),tt=Object(o.b)(function(e){return{}},function(e){return{updateUserData:function(t){e({type:"UPDATE_PROFILE_USER_DATA",data:t})}}})(et),at=function(e){function t(e){var a;Object(u.a)(this,t);var n={token:(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).props.token};return Ye.logout(n,function(){a.props.clearUserData()}),a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement(l.a,{to:"/"})}}]),t}(n.Component),nt=Object(o.b)(function(e){return{token:e.profile.token}},function(e){return{clearUserData:function(t){e({type:"CLEAR_PROFILE_USER_DATA",data:{}})}}})(at),rt=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).checkAccess=a.checkAccess.bind(Object(m.a)(a)),a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"checkAccess",value:function(e,t){}}]),t}(n.Component),it=Object(o.b)(function(e){return{userRoles:e.profile.userRoles}},function(e){return{}})(rt),st=function(e){function t(e){var a;Object(u.a)(this,t),a=Object(p.a)(this,Object(h.a)(t).call(this,e));var n=(new U).check(["ROLE_USER"],a.props.userRoles);return a.state={isAllowAccess:n},a.handleChange=a.handleChange.bind(Object(m.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(m.a)(a)),a.load=a.load.bind(Object(m.a)(a)),n&&a.load(),a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"load",value:function(){var e=this,t=this.props.userId,a={token:this.props.token,user:[{id:t}]};v.get("user",a,function(t){0!=t.data.results.length&&(e.props.updateData("email",t.data.results[0].email),e.forceUpdate())})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=this.props.source,n={token:this.props.token};if(this.props.formData.password!=this.props.formData.repeat_password)return this.props.updateErrors({password:["\u041f\u0430\u0440\u043e\u043b\u0438 \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442"]}),void this.props.updateErrors({repeat_password:["\u041f\u0430\u0440\u043e\u043b\u0438 \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442"]});n[a]=[{email:this.props.formData.email},{password:this.props.formData.password}],v.update(a,n,function(e){if(v.isSuccess(e))Ze.fire("","\u0414\u0430\u043d\u043d\u044b\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b","success");else{var a=v.getMessages(e);t.props.updateErrors(a)}})}},{key:"handleChange",value:function(e){var t=e.target.name;"password"==t||"repeat_password"==t?(this.props.clearErrorField("password"),this.props.clearErrorField("repeat_password")):this.props.clearErrorField(e.target.name),this.props.updateData(e.target.name,e.target.value)}},{key:"getNavigationItems",value:function(){return[{link:"/profile/settings",name:"\u041b\u0438\u0447\u043d\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f",isActive:!0},{link:"/profile/history",name:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}]}},{key:"render",value:function(){return this.state.isAllowAccess?r.a.createElement("div",{className:"wrapper wrapper__border-top wrapper__padding-footer"},r.a.createElement("div",{className:"catalog"},r.a.createElement("div",{className:"catalog__menu"},r.a.createElement(O,{navigationName:"\u041c\u0435\u043d\u044e",items:this.getNavigationItems()})),r.a.createElement("div",{className:"catalog__items"},r.a.createElement(te.a,{className:"text-left",validated:!1,onSubmit:this.handleSubmit},r.a.createElement(te.a.Group,{className:"text-left",as:x.a,md:"4",controlId:"message"},r.a.createElement(te.a.Label,{className:"pt-2 pb-2"},"\u0412\u0430\u0448 email:"),r.a.createElement(te.a.Control,{autoComplete:"off",type:"text",name:"email",value:this.props.formData.email,onChange:this.handleChange,isInvalid:this.props.formErrors.email}),r.a.createElement(te.a.Control.Feedback,null,"\u0412\u0441\u0435 \u0432\u0435\u0440\u043d\u043e!"),r.a.createElement(te.a.Control.Feedback,{type:"invalid"},this.props.formErrors.email)),r.a.createElement(te.a.Group,{className:"text-left",as:x.a,md:"4",controlId:"subject"},r.a.createElement(te.a.Label,{className:"pt-2 pb-2"},"\u041f\u0430\u0440\u043e\u043b\u044c:"),r.a.createElement(te.a.Control,{type:"password",name:"password",value:this.props.formData.password,onChange:this.handleChange,isInvalid:this.props.formErrors.password}),r.a.createElement(te.a.Control.Feedback,null,"\u0412\u0441\u0435 \u0432\u0435\u0440\u043d\u043e!"),r.a.createElement(te.a.Control.Feedback,{type:"invalid"},this.props.formErrors.password)),r.a.createElement(te.a.Group,{className:"text-left",as:x.a,md:"4",controlId:"subject"},r.a.createElement(te.a.Label,{className:"pt-2 pb-2"},"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c:"),r.a.createElement(te.a.Control,{type:"password",name:"repeat_password",onChange:this.handleChange,isInvalid:this.props.formErrors.repeat_password}),r.a.createElement(te.a.Control.Feedback,null,"\u0412\u0441\u0435 \u0432\u0435\u0440\u043d\u043e!"),r.a.createElement(te.a.Control.Feedback,{type:"invalid"},this.props.formErrors.repeat_password)),r.a.createElement(W.a,{className:"m-3",type:"submit",disabled:this.props.isLoading},this.props.isLoading?"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430\u2026":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"))))):r.a.createElement(l.a,{to:"/auth"})}}]),t}(it),ot=Object(o.b)(function(e){return{token:e.profile.token,userRoles:e.profile.userRoles,userId:e.profile.currentUserId,source:e.profile.source,formData:e.profile.formData,formErrors:e.profile.formErrors,isLoading:e.profile.isLoading}},function(e){return{updateData:function(t,a){e({type:"UPDATE_PROFILE_FORM",data:{name:t,value:a}})},updateIsLoading:function(t){e({type:"UPDATE_PRODILE_FORM_IS_LOADING",data:{isLoading:t}})},updateErrors:function(t){e({type:"UPDATE_ERRORS_PROFILE_FORM",data:t})},clearErrorField:function(t){e({type:"CLEAR_ERROR_FIELD_PROFILE_FORM",data:{name:t}})}}})(st),ct=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(d.a)(t,[{key:"getStatusDescription",value:function(e){return"101"==e?"\u041d\u043e\u0432\u044b\u0439":"200"==e?"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435":"300"==e?"\u0423\u0441\u043f\u0435\u0448\u043d\u043e":"401"==e?"\u041e\u0442\u043c\u0435\u043d\u0435\u043d \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u043c":"402"==e?"\u041e\u0442\u043c\u0435\u043d\u0435\u043d \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u043e\u043c":void 0}},{key:"render",value:function(){return r.a.createElement("div",{className:this.props.className},this.getStatusDescription(this.props.code))}}]),t}(r.a.Component),lt=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(d.a)(t,[{key:"getLink",value:function(){return"/profile/order/"+this.props.id}},{key:"render",value:function(){return r.a.createElement(c.b,{className:this.props.className,to:this.getLink()},this.props.children)}}]),t}(r.a.Component),ut=function(e){function t(e){var a;Object(u.a)(this,t),a=Object(p.a)(this,Object(h.a)(t).call(this,e));var n=["ROLE_USER"],r=(new U).check(n,a.props.userRoles);return a.state={allowRoles:n,isEmpty:!1,isLoading:!0,orders:[],isAllowAccess:r},a.loadOrders=a.loadOrders.bind(Object(m.a)(a)),a.loadOrdersProducts=a.loadOrdersProducts.bind(Object(m.a)(a)),r&&a.loadOrders(),a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"loadOrders",value:function(){var e=this,t={token:this.props.token,order:{user_id:this.props.userId,countOnPage:1e3}};v.get("order",t,function(t){0!=t.data.length?e.loadOrdersProducts(t.data.results):e.setState(Object($.a)({},e.state,{isEmpty:!0,isLoading:!1}))})}},{key:"loadOrdersProducts",value:function(e){var t=this,a=[];e.map(function(e){e.products.map(function(e){a.push(e.product_id)})}),a=this.getUniqueArr(a);v.get("product",{product:{ids:a,countOnPage:1e3}},function(a){var n=[];a.data.results.map(function(e){n[e.id]=e}),e.map(function(e){e.products.map(function(e){e.data=n[e.product_id]})}),t.setState(Object.assign({},Object($.a)({},t.state,{orders:e,isLoading:!1})))})}},{key:"getUniqueArr",value:function(e){return e.filter(function(e,t,a){return a.indexOf(e)===t})}},{key:"getNavigationItems",value:function(){return[{link:"/profile/settings",name:"\u041b\u0438\u0447\u043d\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f"},{link:"/profile/history",name:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432",isActive:!0}]}},{key:"render",value:function(){return this.state.isAllowAccess?this.state.orders.length?r.a.createElement("div",{className:"wrapper wrapper__border-top wrapper__padding-footer"},r.a.createElement("div",{className:"catalog"},r.a.createElement("div",{className:"catalog__menu"},r.a.createElement(O,{navigationName:"\u041c\u0435\u043d\u044e",items:this.getNavigationItems()})),r.a.createElement("div",{className:"catalog__items"},r.a.createElement(H.Table,null,r.a.createElement(H.Thead,null,r.a.createElement(H.Tr,null,r.a.createElement(H.Td,null,"\u041d\u043e\u043c\u0435\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"),r.a.createElement(H.Td,null,"\u0421\u0442\u0430\u0442\u0443\u0441"),r.a.createElement(H.Td,null,"\u0422\u043e\u0432\u0430\u0440\u044b"),r.a.createElement(H.Td,null,"\u0421\u0443\u043c\u043c\u0430"))),r.a.createElement(H.Tbody,null,this.state.orders.map(function(e,t){return r.a.createElement(H.Tr,{key:t},r.a.createElement(H.Td,{"text-align":"text-center"},r.a.createElement(lt,{id:e.id},"\u0417\u0430\u043a\u0430\u0437 ",e.id)),r.a.createElement(H.Td,null,r.a.createElement(ct,{code:parseInt(e.status)})),r.a.createElement(H.Td,null,e.products.map(function(e,t){return r.a.createElement(k,{className:"img-list",key:t,imgPaths:e.data.img_paths})})),r.a.createElement(H.Td,null,e.amount," \u0440."))})))))):r.a.createElement("div",{className:"wrapper wrapper__border-top wrapper__padding-footer"},"\u0417\u0430\u043a\u0430\u0437\u044b \u043d\u0430 \u043d\u0430\u0439\u0434\u0435\u043d\u044b \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437 \u0432 ",r.a.createElement(c.b,{to:"/cart"},"\u043a\u043e\u0440\u0437\u0438\u043d\u0435")):r.a.createElement(l.a,{to:"/auth"})}}]),t}(it),dt=Object(o.b)(function(e){return{token:e.profile.token,userRoles:e.profile.userRoles,userId:e.profile.currentUserId}},function(e){return{}})(ut),pt=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){if(this.props.isLoading)return r.a.createElement("div",{id:"fountainG"},r.a.createElement("div",{id:"fountainG_1",className:"fountainG"}),r.a.createElement("div",{id:"fountainG_2",className:"fountainG"}),r.a.createElement("div",{id:"fountainG_3",className:"fountainG"}),r.a.createElement("div",{id:"fountainG_4",className:"fountainG"}),r.a.createElement("div",{id:"fountainG_5",className:"fountainG"}),r.a.createElement("div",{id:"fountainG_6",className:"fountainG"}),r.a.createElement("div",{id:"fountainG_7",className:"fountainG"}),r.a.createElement("div",{id:"fountainG_8",className:"fountainG"}))}}]),t}(r.a.Component),ht=function(e){function t(e){var a;Object(u.a)(this,t),a=Object(p.a)(this,Object(h.a)(t).call(this,e));var n=(new U).check(["ROLE_USER"],a.props.userRoles);return a.state={products:[],order:{},isEmpty:!1,isLoading:!0,isAllowAccess:n},a.load=a.load.bind(Object(m.a)(a)),n&&a.load(),a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"load",value:function(){var e=this,t={token:this.props.token,order:{id:parseInt(this.props.match.params.id)}};v.get("order",t,function(t){if(0!=t.data.results.length){var a=t.data.results[0];e.setState(Object($.a)({},e.state,{order:a,isLoading:!1}))}})}},{key:"getNavigationItems",value:function(){return[{link:"/profile/settings",name:"\u041b\u0438\u0447\u043d\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f"},{link:"/profile/history",name:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}]}},{key:"render",value:function(){return this.state.isAllowAccess?this.state.isLoading?r.a.createElement(pt,{isLoading:!0}):r.a.createElement("div",{className:"wrapper wrapper__border-top wrapper__padding-footer"},r.a.createElement("div",{className:"catalog p-3"},r.a.createElement("div",{className:"catalog__menu"},r.a.createElement(O,{navigationName:"\u041c\u0435\u043d\u044e",items:this.getNavigationItems()})),r.a.createElement("div",{className:"catalog__items"},r.a.createElement("h1",{className:"header-page"},"\u0417\u0430\u043a\u0430\u0437 ",this.state.order.id),r.a.createElement(de,{value:this.state.order.products,location:this.props.location,name:"name",isShowAppendButton:!1,onChange:function(e,t){},productActions:[]})))):r.a.createElement(l.a,{to:"/auth"})}}]),t}(it),mt=Object(o.b)(function(e){return{token:e.profile.token,userRoles:e.profile.userRoles,currentUserId:e.profile.currentUserId}},function(e){return{}})(ht),gt=a(193),ft=a(98),bt=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.alt?this.props.alt:"",t=this.props.className?this.props.className:"",a="http://"+window.location.hostname+"/img/product/"+this.props.src;return r.a.createElement("img",{className:t,src:a,alt:e})}}]),t}(r.a.Component),vt=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(d.a)(t,[{key:"getLink",value:function(){return"/product/"+this.props.vendor+"_"+this.props.id}},{key:"render",value:function(){return r.a.createElement(c.b,{className:this.props.className,to:this.getLink()},this.props.children)}}]),t}(r.a.Component),Et=function(e){function t(e){var a;Object(u.a)(this,t);var n=(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).getParams(a.props.match),r=n?n.id:null,i=n?n.seoname:null,s=!n;return a.state={isNotFound:s,id:r,seoname:i,product:null,similars:[],carouselSelectItem:0,countSimilar:a.getCountSimilar(),isInCart:a.checkInCart.bind(Object(m.a)(a)),breadCrumbs:[]},a.init=a.init.bind(Object(m.a)(a)),a.getProductById=a.getProductById.bind(Object(m.a)(a)),a.getParams=a.getParams.bind(Object(m.a)(a)),a.addToBasket=a.addToBasket.bind(Object(m.a)(a)),a.getCartButtonText=a.getCartButtonText.bind(Object(m.a)(a)),a.checkInCart=a.checkInCart.bind(Object(m.a)(a)),n&&a.init(),window.addEventListener("resize",function(){a.setState(Object($.a)({},a.state,{countSimilar:a.getCountSimilar()}))}),a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"getCountSimilar",value:function(){return 640>window.innerWidth?3:4}},{key:"init",value:function(){var e=this;this.getProductById(function(t){new y({sub0:t.category.seoname},!1).getChain(function(t,a){e.setState(Object($.a)({},e.state,{breadCrumbs:a}))}),e.getSimilarByCatId(t.category.id,function(a){e.setState(Object.assign(e.state,{product:t,similars:a.results}))})})}},{key:"getProductById",value:function(e){var t=this;v.get("product",{product:{id:this.state.id}},function(a){0!=a.data.totalCount?e(a.data.results[0]):t.setState(Object.assign(t.state,{isNotFound:!0}))})}},{key:"getSimilarByCatId",value:function(e,t){v.get("product",{product:{category_id:e}},function(e){t(e.data)})}},{key:"getParams",value:function(e){if(e.params.seonameWithId){var t=e.params.seonameWithId.split("_");if(2!=!t.length)if(NaN!=parseInt(t[1]))return{id:parseInt(t[1]),seoname:t[0]}}}},{key:"addToBasket",value:function(){this.setState(Object($.a)({},this.state,{isInCart:!this.state.isInCart})),this.props.addProductToCart(this.state.id)}},{key:"componentWillUpdate",value:function(e,t,a){if(this.props.match.url!=e.match.url){var n=this.getParams(e.match),r=n?n.id:null,i=n?n.seoname:null;this.setState(Object.assign(this.state,{id:r,seoname:i,carouselSelectItem:0})),this.init()}}},{key:"checkInCart",value:function(){var e=this,t=!1;return this.props.cartProducts.map(function(a){a.id==e.state.id&&(t=!0)}),t}},{key:"getCartButtonText",value:function(){return this.checkInCart()?"\u0412 \u043a\u043e\u0440\u0437\u0438\u043d\u0435":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443"}},{key:"render",value:function(){var e,t=this;if(this.state.isNotFound)return r.a.createElement(E,null);if(!this.state.product)return r.a.createElement(pt,{isLoading:!0});return r.a.createElement("div",{className:"wrapper wrapper__border-top wrapper__padding-footer"},r.a.createElement(_,{values:this.state.breadCrumbs}),r.a.createElement("div",{className:"wrapper__content"},r.a.createElement("div",{className:"slider"},r.a.createElement(gt.a,{activeIndex:this.state.carouselSelectItem,onSelect:function(e){t.setState(Object.assign(t.state,{carouselSelectItem:e}))}},this.state.product.img_paths.split(",").map(function(e,t){return r.a.createElement(gt.a.Item,{className:"text-center",key:t},r.a.createElement(bt,{className:"block-inline",src:e}))}))),r.a.createElement("div",{className:"item-detail-info"},r.a.createElement("div",{className:"item-detail-info__title"},this.state.product.name),r.a.createElement("div",{className:"item-detail-info__price"},this.state.product.price," \u0440."),r.a.createElement("div",{className:"item-detail-info__buy-button",onClick:this.addToBasket},r.a.createElement("div",{className:"item-detail-info__cart-icon"}),r.a.createElement("div",{className:"item-detail-info__buy-button-text"},this.getCartButtonText())),r.a.createElement("div",{className:"item-detail-info__category"},"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f: ",this.state.product.category.name),r.a.createElement("div",{className:"item-detail-info__description"},this.state.product.full_description))),r.a.createElement("div",{className:"wrapper__content"},r.a.createElement("div",{className:"similar"},r.a.createElement("div",{className:"similar__header"},"\u041f\u043e\u0445\u043e\u0436\u0438\u0435 \u0442\u043e\u0432\u0430\u0440\u044b:"),r.a.createElement("div",{className:"similar__body"},r.a.createElement("div",{className:"similar__left"},r.a.createElement("div",{className:"similar__left-icon",onClick:function(){return e.prev()}})),r.a.createElement("div",{className:"similar__right"},r.a.createElement("div",{className:"similar__right-icon",onClick:function(){return e.next()}})),r.a.createElement(ft.a,{className:"similar__slider",slideClass:"similar__item",visibleSlides:this.state.countSimilar,ref:function(t){e=t}},this.state.similars.map(function(e,t){return r.a.createElement("div",{className:"item",key:t},r.a.createElement("div",{className:"list__item-im-block"},r.a.createElement(vt,{className:"list__item-im-link",id:e.id,vendor:e.vendor},r.a.createElement(k,{className:"item__preview-img",imgPaths:e.img_paths}))),r.a.createElement("div",{className:"similar__item-name"},r.a.createElement(vt,{id:e.id,vendor:e.vendor},e.name)),r.a.createElement("div",{className:"similar__item-price"},e.price," \u0440."))}))))))}}]),t}(n.Component),Ot=Object(o.b)(function(e){return{cartProducts:e.cart.products}},function(e){return{addProductToCart:function(t){e({type:"CART_ADD_PRODUCT",data:{id:t}})}}})(Et),kt=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).registerOrder=a.registerOrder.bind(Object(m.a)(a)),a.onChange=a.onChange.bind(Object(m.a)(a)),a.getOrderButton=a.getOrderButton.bind(Object(m.a)(a)),a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"registerOrder",value:function(){var e=this,t=[];this.props.products.map(function(e){t.push({id:e.id,count:e.count})});var a={token:this.props.token,order:[{user_id:1},{products:t}]};v.add("order",a,function(t){v.isSuccess(t)?(Ze.fire("\u0417\u0430\u043a\u0430\u0437 \u043e\u0444\u043e\u0440\u043c\u043b\u0435\u043d","\u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0435\u0433\u043e \u0441\u0442\u0430\u0442\u0443\u0441 \u0432 \u043b\u0438\u0447\u043d\u043e\u043c \u043a\u0430\u0431\u0438\u043d\u0435\u0442\u0435","success"),e.props.clearAll()):Ze.fire("\u041e\u0448\u0438\u0431\u043a\u0430","\u041d\u0430 \u0441\u0430\u0439\u0442\u0435 \u0432\u0435\u0434\u0443\u0442\u044c\u0441\u044f \u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0440\u0430\u0431\u043e\u0442\u044b, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0437\u0436\u0435","error")})}},{key:"onChange",value:function(e){this.props.updateCart(e)}},{key:"getOrderButton",value:function(){return this.props.userId?r.a.createElement(W.a,{className:"text-left mt-2 mb-4",variant:"success",onClick:this.registerOrder},"\u0417\u0430\u043a\u0430\u0437\u0430\u0442\u044c"):r.a.createElement("div",{className:"p-4"},"\u0414\u043b\u044f \u0437\u0430\u043a\u0430\u0437\u0430 ",r.a.createElement(c.b,{to:"/auth"},"\u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0443\u0439\u0442\u0435\u0441\u044c")," \u0438\u043b\u0438 ",r.a.createElement(c.b,{to:"/registration"},"\u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u0443\u0439\u0442\u0435\u0441\u044c"))}},{key:"render",value:function(){var e=this;if(0==this.props.products.length)return r.a.createElement("div",{className:"wrapper wrapper__border-top wrapper__padding-footer"},"\u041a\u043e\u0440\u0437\u0438\u043d\u0430 \u043f\u0443\u0441\u0442\u0430");var t=Object(Q.a)(this.props.products).map(function(e){return e.product_id=e.id,e});return r.a.createElement("div",{className:"wrapper wrapper__border-top wrapper__padding-footer"},r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"header-page"},"\u041a\u043e\u0440\u0437\u0438\u043d\u0430:"),r.a.createElement(de,{token:this.props.token,value:t,location:this.props.location,name:"name",isShowAppendButton:!1,productActions:[{actionName:"delete",action:function(t){e.props.deleteItem(t)}}],onChange:function(t,a){e.onChange(a)}})),this.getOrderButton())}}]),t}(n.Component),Ct=Object(o.b)(function(e){return{token:e.profile.token,userId:e.profile.currentUserId,products:e.cart.products}},function(e){return{updateCart:function(t){e({type:"CART_UPDATE_PRODUCTS",data:{products:t}})},deleteItem:function(t){e({type:"CART_DELETE_PRODUCT",data:{id:t}})},addProductToCart:function(t){e({type:"CART_ADD_PRODUCT",data:{id:t}})},clearAll:function(){e({type:"CART_CLEAR",data:{}})}}})(kt),_t=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).handleChange=a.handleChange.bind(Object(m.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(m.a)(a)),a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=this.props.source,n={};n[a]=[{subject:this.props.formData.subject},{message:this.props.formData.message},{email:this.props.formData.email}],this.props.updateIsLoading(!0),v.add(a,n,function(e){if(t.props.updateIsLoading(!1),v.isSuccess(e))return t.props.clearData(),t.props.clearErrors(),void Ze.fire("","\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e","success");var a=v.getMessages(e);t.props.updateErrors(a)})}},{key:"handleChange",value:function(e){return this.props.clearErrorField(e.target.name),this.props.updateData(e.target.name,e.target.value),!1}},{key:"render",value:function(){return r.a.createElement(N.a,null,r.a.createElement(te.a,{validated:!1,onSubmit:this.handleSubmit},r.a.createElement(te.a.Group,{as:x.a,md:"4",controlId:"message"},r.a.createElement(te.a.Label,null,"\u0412\u0430\u0448 Email"),r.a.createElement(te.a.Control,{type:"email",name:"email",onChange:this.handleChange,isInvalid:this.props.formErrors.email}),r.a.createElement(te.a.Control.Feedback,null,"\u0412\u0441\u0435 \u0432\u0435\u0440\u043d\u043e!"),r.a.createElement(te.a.Control.Feedback,{type:"invalid"},this.props.formErrors.email)),r.a.createElement(te.a.Group,{as:x.a,md:"4",controlId:"subject"},r.a.createElement(te.a.Label,null,"\u0422\u0435\u043c\u0430 \u043f\u0438\u0441\u044c\u043c\u0430"),r.a.createElement(te.a.Control,{type:"text",name:"subject",onChange:this.handleChange,isInvalid:this.props.formErrors.subject}),r.a.createElement(te.a.Control.Feedback,null,"\u0412\u0441\u0435 \u0432\u0435\u0440\u043d\u043e!"),r.a.createElement(te.a.Control.Feedback,{type:"invalid"},this.props.formErrors.subject)),r.a.createElement(te.a.Group,{as:x.a,md:"4",controlId:"message"},r.a.createElement(te.a.Label,null,"\u0421\u043e\u0431\u0449\u0435\u043d\u0438\u0435"),r.a.createElement(te.a.Control,{type:"text",as:"textarea",rows:"4",name:"message",onChange:this.handleChange,isInvalid:this.props.formErrors.message}),r.a.createElement(te.a.Control.Feedback,null,"\u0412\u0441\u0435 \u0432\u0435\u0440\u043d\u043e!"),r.a.createElement(te.a.Control.Feedback,{type:"invalid"},this.props.formErrors.message)),r.a.createElement(W.a,{type:"submit",disabled:this.props.isLoading},this.props.isLoading?"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430\u2026":"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c")))}}]),t}(n.Component),yt=Object(o.b)(function(e){return{source:e.contacts.source,formData:e.contacts.formData,formErrors:e.contacts.formErrors,isLoading:e.contacts.isLoading}},function(e){return{updateData:function(t,a){e({type:"UPDATE_CONTACTS_FORM",data:{name:t,value:a}})},updateIsLoading:function(t){e({type:"UPDATE_CONTACTS_FORM_IS_LOADING",data:{isLoading:t}})},updateErrors:function(t){e({type:"UPDATE_ERRORS_CONTACTS_FORM",data:t})},clearErrorField:function(t){e({type:"CLEAR_ERROR_FIELD_CONTACTS_FORM",data:{name:t}})},clearData:function(){e({type:"CLEAR_CONTACTS_FORM",data:{}})},clearErrors:function(){e({type:"CLEAR_ERROR_CONTACTS_FORM",data:{}})}}})(_t),jt=function(e){function t(e){var a;Object(u.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).loadProducts=a.loadProducts.bind(Object(m.a)(a)),a.onFavouriteClick=a.onFavouriteClick.bind(Object(m.a)(a)),a.state={products:[]};var n=[];return a.props.products.map(function(e){n.push(e.id)}),a.loadProducts(n),a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"loadProducts",value:function(e){var t=this;v.get("product",{product:{ids:e}},function(e){t.setState(Object.assign(t.state,{products:e.data.results}))})}},{key:"componentWillUpdate",value:function(e,t,a){if(this.props.products!=e.products){var n=[];e.products.map(function(e){n.push(e.id)}),this.loadProducts(n)}}},{key:"onFavouriteClick",value:function(e){this.props.deleteProduct(e)}},{key:"render",value:function(){var e=this;return 0==this.props.products.length?r.a.createElement("div",{className:"wrapper wrapper__border-top wrapper__padding-footer"},"\u041d\u0435\u0442 \u0438\u0437\u0431\u0440\u0430\u043d\u044b\u0445 \u0442\u043e\u0432\u0430\u0440\u043e\u0432"):r.a.createElement("div",{className:"wrapper wrapper__border-top wrapper__padding-footer"},r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"header-page"},"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u044b\u0435:"),this.state.products.map(function(t,a){return r.a.createElement(C,{key:a,id:t.id,name:t.name,vendor:t.vendor,price:t.price,imgPaths:t.img_paths,onBasketClick:e.onBasketClick,onFavouriteClick:e.onFavouriteClick})})))}}]),t}(n.Component),St=Object(o.b)(function(e){return{products:e.favourite.products}},function(e){return{deleteProduct:function(t){e({type:"FAVOURITE_DELETE_PRODUCT",data:{id:t}})}}})(jt),Nt=a(100),Tt=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).onMenuStateChange=a.onMenuStateChange.bind(Object(m.a)(a)),a.closeMenu=a.closeMenu.bind(Object(m.a)(a)),a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"onMenuStateChange",value:function(e){this.props.isMenuOpen!=e.isOpen&&(e.isOpen?this.props.openMenu():this.props.closeMenu())}},{key:"closeMenu",value:function(){this.props.closeMenu()}},{key:"getUserBlockMenu",value:function(){return this.props.userId?r.a.createElement("div",{className:"burger-menu__block_section"},r.a.createElement("div",{className:"burger-menu__sub-header"},"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"),r.a.createElement("div",{className:"burger-menu__block"},r.a.createElement(c.b,{className:"burger-menu__link",onClick:this.closeMenu,to:"/profile/settings"},"\u041b\u0438\u0447\u043d\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f"),r.a.createElement(c.b,{className:"burger-menu__link",onClick:this.closeMenu,to:"/profile/history"},"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432")),r.a.createElement("div",{className:"burger-menu__sub-header"},r.a.createElement(c.b,{className:"burger-menu__link",onClick:this.closeMenu,to:"/logout"},"\u0412\u044b\u0439\u0442\u0438"))):r.a.createElement("div",{className:"burger-menu__block_section"},r.a.createElement(c.b,{className:"burger-menu__link",onClick:this.closeMenu,to:"/auth"},"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"),r.a.createElement(c.b,{className:"burger-menu__link",onClick:this.closeMenu,to:"/registration"},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"))}},{key:"render",value:function(){var e=this;return r.a.createElement(Nt.slide,{pageWrapId:"page-wrap",onStateChange:this.onMenuStateChange,isOpen:this.props.isMenuOpen},r.a.createElement("div",{className:"burger-menu"},r.a.createElement("h1",{className:"burger-menu__header"},"\u041c\u0435\u043d\u044e"),r.a.createElement(c.b,{className:"burger-menu__link",onClick:this.closeMenu,to:"/cart"},"\u041a\u043e\u0440\u0437\u0438\u043d\u0430"),r.a.createElement(c.b,{className:"burger-menu__link",onClick:this.closeMenu,to:"/favourite"},"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u044b\u0435"),this.getUserBlockMenu(),r.a.createElement("div",{className:"burger-menu__block_section"},this.props.breadCrumbs.map(function(t,a){return r.a.createElement("div",{key:a},r.a.createElement(c.b,{className:"burger-menu__link",onClick:e.closeMenu,to:t.link},t.name))}),r.a.createElement("div",{className:"burger-menu__block_section"},this.props.categories.map(function(t,a){return r.a.createElement(c.b,{key:a,className:"burger-menu__link",onClick:e.closeMenu,to:t.link},t.name)})))))}}]),t}(r.a.Component),Pt=Object(o.b)(function(e){return{breadCrumbs:e.list.breadCrumbs,categories:e.list.categories,isMenuOpen:e.header.isMenuOpen,userId:e.profile.currentUserId}},function(e){return{updateCart:function(t){e({type:"CART_UPDATE_PRODUCTS",data:{products:t}})},openMenu:function(){e({type:"HEADER_OPEN_MENU",data:{}})},closeMenu:function(){e({type:"HEADER_CLOSE_MENU",data:{}})}}})(Tt),It=function(e){var t=e.store;return r.a.createElement(o.a,{store:t},r.a.createElement(c.a,null,r.a.createElement("div",null,r.a.createElement(Pt,null),r.a.createElement(l.d,null,r.a.createElement(l.b,{path:"/backoffice",children:r.a.createElement(Be,null)}),r.a.createElement(l.b,{path:"/",children:r.a.createElement(Ve,null)})),r.a.createElement(l.d,null,r.a.createElement(l.b,{exact:!0,path:"/product/:seonameWithId",component:Ot}),r.a.createElement(l.b,{exact:!0,path:"/cart",component:Ct}),r.a.createElement(l.b,{exact:!0,path:"/favourite",component:St}),r.a.createElement(l.b,{exact:!0,path:"/contacts",component:yt}),r.a.createElement(l.a,{exact:!0,from:"/profile",to:"/profile/history"}),r.a.createElement(l.b,{exact:!0,path:"/profile/settings",component:ot}),r.a.createElement(l.b,{exact:!0,path:"/profile/history",component:dt}),r.a.createElement(l.b,{exact:!0,path:"/profile/order/:id",component:mt}),r.a.createElement(l.b,{exact:!0,path:"/auth",component:ze}),r.a.createElement(l.b,{exact:!0,path:"/registration",component:tt}),r.a.createElement(l.b,{exact:!0,from:"/logout",component:nt}),r.a.createElement(l.b,{exact:!0,path:"/backoffice",component:F}),r.a.createElement(l.b,{exact:!0,path:"/backoffice/product",component:X}),r.a.createElement(l.b,{exact:!0,path:"/backoffice/product/add",component:ve}),r.a.createElement(l.b,{exact:!0,path:"/backoffice/product/edit/:id",component:Oe}),r.a.createElement(l.b,{exact:!0,path:"/backoffice/category",component:Ce}),r.a.createElement(l.b,{exact:!0,path:"/backoffice/category/add",component:ye}),r.a.createElement(l.b,{exact:!0,path:"/backoffice/category/edit/:id",component:Se}),r.a.createElement(l.b,{exact:!0,path:"/backoffice/order",component:Te}),r.a.createElement(l.b,{exact:!0,path:"/backoffice/order/add",component:Ie}),r.a.createElement(l.b,{exact:!0,path:"/backoffice/order/edit/:id",component:Ae}),r.a.createElement(l.b,{path:"/:sub0/:sub1/:sub2/:sub3",component:D}),r.a.createElement(l.b,{path:"/:sub0/:sub1/:sub2",component:D}),r.a.createElement(l.b,{path:"/:sub0/:sub1",component:D}),r.a.createElement(l.b,{path:"/:sub0",component:D}),r.a.createElement(l.b,{path:"/",component:D})),r.a.createElement(l.d,null,r.a.createElement(l.b,{path:"/backoffice",children:r.a.createElement(We,null)}),r.a.createElement(l.b,{path:"/",children:r.a.createElement(qe,null)})))))},Rt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function At(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}var wt=a(43),Dt=a(101),Ft={source:"contacts",formData:{subject:"",message:"",email:""},formErrors:{subject:"",message:"",email:""},isLoading:!1},Lt={label:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438",source:"category",data:[],totalCount:0,editFields:[{label:"\u0418\u043c\u044f",type:"input",name:"name",value:""},{label:"Seoname",type:"input",name:"seoname",value:""},{label:"\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u0430\u044f \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f",type:"parentCategory",name:"parent_id",value:0}],showedColumns:[{label:"Id",name:"id"},{label:"\u0418\u043c\u044f",name:"name"},{label:"Seoname",name:"seoname"}]},Ut={label:"\u0422\u043e\u0432\u0430\u0440\u044b",source:"product",data:[],totalCount:0,editFields:[{label:"\u0418\u043c\u044f",type:"input",name:"name",value:""},{label:"\u0410\u0440\u0442\u0438\u043a\u043b\u044c",type:"input",name:"vendor",value:""},{label:"\u0426\u0435\u043d\u0430",type:"input",name:"price",value:""},{label:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f",type:"category",name:"category_id",value:0},{label:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",type:"textarea",name:"description",value:""},{label:"\u041f\u043e\u043b\u043d\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",type:"textarea",name:"full_description",value:""},{label:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f",type:"imageProduct",name:"image_hash",value:""}],showedColumns:[{label:"Id",name:"id"},{label:"\u041a\u0430\u0440\u0442\u0438\u043d\u043a\u0430",name:"img_paths",type:"image"},{label:"\u0418\u043c\u044f",name:"name"},{label:"\u0410\u0440\u0442\u0438\u043a\u043b\u044c",name:"vendor"},{label:"\u0426\u0435\u043d\u0430",name:"price"}]},Bt={label:"\u0417\u0430\u043a\u0430\u0437\u044b",source:"order",data:[],totalCount:0,editFields:[{label:"\u0412\u044b\u0431\u043e\u0440 \u043a\u043b\u0438\u0435\u043d\u0442\u0430",type:"userSelect",name:"user_id",value:0},{label:"\u0422\u043e\u0432\u0430\u0440\u044b",type:"order",name:"products",value:0}],showedColumns:[{label:"Id",name:"id"},{label:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c",name:"user_id"},{label:"\u0421\u0443\u043c\u043c\u0430",name:"amount"}]},Mt={source:"product",isNeedSearch:!1,breadCrumbs:[],data:[],categories:[],currentCategory:null,totalCount:0};var xt={products:function(){var e=localStorage.getItem("cart");return null==e?[]:JSON.parse(e)}()};var Wt={currentUserId:function(){var e=localStorage.getItem("current_user_id");return null==e?0:parseInt(e)}(),userRoles:function(){var e=localStorage.getItem("user_roles");return null==e?["ROLE_UNKNOWN"]:JSON.parse(e)}(),token:localStorage.getItem("token"),accessRoles:["ROLE_USER","ROLE_ADMIN"],source:"user",formData:{email:"",password:"",repeat_password:""},formErrors:{email:"",password:"",repeat_password:""},isLoading:!1};var Gt={products:function(){var e=localStorage.getItem("favourite");return null==e?[]:JSON.parse(e)}()},Ht={searchValue:"",isSearch:!1,isMenuOpen:!1},Vt=Object(wt.b)({routing:Dt.routerReducer,header:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ht,t=arguments.length>1?arguments[1]:void 0,a=Object.assign({},e);return"HEADER_UPDATE_SEARCH_VALUE"===t.type?(a.searchValue=t.data.searchValue,a):"HEADER_UPDATE_IS_SEARCH"===t.type?(a.isSearch=t.data.isSearch,a):"HEADER_OPEN_MENU"===t.type?(a.isMenuOpen=!0,console.log(a),a):"HEADER_CLOSE_MENU"===t.type?(a.isMenuOpen=!1,a):a},contacts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ft,t=arguments.length>1?arguments[1]:void 0,a=Object.assign({},e);if("CONTACTS_ADD"===t.type)return a;if("UPDATE_CONTACTS_FORM"===t.type)return a.formData[t.data.name]=t.data.value,a;if("UPDATE_CONTACTS_FORM_IS_LOADING"===t.type)return a.isLoading=t.data.isLoading,a;if("UPDATE_ERRORS_CONTACTS_FORM"===t.type){var n=Object.assign({},e.formErrors);return Object.keys(t.data).map(function(e){n[e]=t.data[e]}),a.formErrors=n,a}if("CLEAR_ERROR_FIELD_CONTACTS_FORM"===t.type){var r=Object.assign({},e.formErrors);return r[t.data.name]="",a.formErrors=r,a}if("CLEAR_ERROR_CONTACTS_FORM"===t.type){var i=Ft.formErrors;return a.formErrors=i,a}return"CLEAR_CONTACTS_FORM"===t.type?a=Object.assign({},Ft):a},list:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mt,t=arguments.length>1?arguments[1]:void 0,a=Object.assign({},e);return"LIST_UPDATE_DATA"===t.type?(a.data=t.data.results,a.totalCount=t.data.totalCount,a):"LIST_UPDATE_CATEGORIES"===t.type?(a.categories=t.data.categories,a):"LIST_UPDATE_IS_NEED_SEARCH"===t.type?(a.isNeedSearch=t.data.isNeedSearch,a):"LIST_UPDATE_CURRENT_CATEGORY"===t.type?(a.currentCategory=t.data.currentCategory,a):"LIST_UPDATE_BEADCRUMBS"===t.type?(a.breadCrumbs=t.data.breadCrumbs,a):a},cart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xt,t=arguments.length>1?arguments[1]:void 0,a=Object.assign({},e);if("CART_UPDATE"===t.type)return console.log("CART_UPDATE"),a.products=t.data.results,console.log("newState",a),localStorage.setItem("cart",a.products),a;if("CART_ADD_PRODUCT"===t.type){var n=!1;return a.products.map(function(e){e.id==t.data.id&&(n=!0)}),n||(a.products.push({id:t.data.id,count:1}),localStorage.setItem("cart",JSON.stringify(a.products))),a}return"CART_DELETE_PRODUCT"===t.type?(console.log("CART_DELETE_PRODUCT",t.data.id),a.products=a.products.filter(function(e){return e.id!=t.data.id}),console.log("newState.products",a.products),localStorage.setItem("cart",JSON.stringify(a.products)),a):"CART_UPDATE_PRODUCTS"===t.type?(console.log("CART_UPDATE_PRODUCTS"),a.products=t.data.products,localStorage.setItem("cart",JSON.stringify(a.products)),console.log("CART_UPDATE_PRODUCTS",a),a):"CART_CLEAR"===t.type?(a.products=[],localStorage.setItem("cart",JSON.stringify([])),a):a},favourite:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gt,t=arguments.length>1?arguments[1]:void 0,a=Object.assign({},e);if("FAVOURITE_UPDATE"===t.type)return a.products=t.data.results,localStorage.setItem("favourite",a.products),a;if("FAVOURITE_ADD_PRODUCT"===t.type){var n=!1;return a.products.map(function(e){e.id==t.data.id&&(n=!0)}),n||(a.products.push({id:t.data.id}),localStorage.setItem("favourite",JSON.stringify(a.products))),a}return"FAVOURITE_DELETE_PRODUCT"===t.type?(a.products=a.products.filter(function(e){return e.id!=t.data.id}),localStorage.setItem("favourite",JSON.stringify(a.products)),a):"FAVOURITE_UPDATE_PRODUCTS"===t.type?(a.products=t.data.products,localStorage.setItem("favourite",JSON.stringify(a.products)),a):"FAVOURITE_CLEAR"===t.type?(a.products=[],localStorage.setItem("favourite",JSON.stringify([])),a):a},profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wt,t=arguments.length>1?arguments[1]:void 0,a=Object.assign({},e);if("CLEAR_PROFILE_USER_DATA"===t.type)return a.currentUserId=0,a.token=null,a.userRoles=["ROLE_UNKNOWN"],localStorage.removeItem("current_user_id"),localStorage.removeItem("token"),localStorage.removeItem("user_roles"),a;if("UPDATE_PROFILE_USER_DATA"===t.type)return a.currentUserId=t.data.user_id,a.token=t.data.token,a.userRoles=t.data.userRoles,localStorage.setItem("current_user_id",a.currentUserId),localStorage.setItem("token",a.token),localStorage.setItem("user_roles",JSON.stringify(a.userRoles)),a;if("UPDATE_PROFILE_USER_ROLES"===t.type)return a.userRoles=t.data.userRoles,a;if("UPDATE_PROFILE_FORM"===t.type)return a.formData[t.data.name]=t.data.value,a;if("UPDATE_PROFILE_FORM_IS_LOADING"===t.type)return a.isLoading=t.data.isLoading,a;if("UPDATE_ERRORS_PROFILE_FORM"===t.type){var n=Object.assign({},e.formErrors);return Object.keys(t.data).map(function(e){n[e]=t.data[e]}),a.formErrors=n,a}if("CLEAR_ERROR_FIELD_PROFILE_FORM"===t.type){var r=Object.assign({},e.formErrors);return r[t.data.name]="",a.formErrors=r,a}if("CLEAR_ERROR_PROFILE_FORM"===t.type){var i=Wt.formErrors;return a.formErrors=i,a}return"CLEAR_PROFILE_FORM"===t.type?a=Object.assign({},Wt):a},product:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ut,t=arguments.length>1?arguments[1]:void 0,a=Object.assign({},e);return"PRODUCT_SET"===t.type?(a.data=t.data.results,a.totalCount=t.data.totalCount,a):"PRODUCT_FIELDS_CHANGE"===t.type?(console.log("PRODUCT_FIELDS_CHANGE",t.data),a.editFields=t.data,a):"PRODUCT_IMAGE_HASH_CHANGE"===t.type?(a.editFields.forEach(function(e){"image_hash"==e.name&&(e.value=t.data.hash)}),a):a},category:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lt,t=arguments.length>1?arguments[1]:void 0,a=Object.assign({},e);return"CATEGORY_SET"===t.type?(a.data=t.data.results,a.totalCount=t.data.totalCount,a):"CATEGORY_DELETE_BY_ID"===t.type?(a.data=a.data.filter(function(e){return e.id!=t.id}),a):"CATEGORY_FIELDS_CHANGE"===t.type?(a.editFields=t.data,a):a},order:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bt,t=arguments.length>1?arguments[1]:void 0,a=Object.assign({},e);return"ORDER_SET"===t.type?(a.data=t.data.results,a.totalCount=t.data.totalCount,a):"ORDER_DELETE_BY_ID"===t.type?(a.data=a.data.filter(function(e){return e.id!=t.id}),console.log(a.data),a):"ORDER_FIELDS_CHANGE"===t.type?(a.editFields=t.data,a):a}}),qt=Object(wt.c)(Vt);s.a.render(r.a.createElement(It,{store:qt}),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("","/service-worker.js");Rt?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):At(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):At(e)})}}()}},[[104,1,2]]]);
//# sourceMappingURL=main.06809c5f.chunk.js.map